13:28:12 [INFO]  CONFIG VALIDIERUNG abgeschlossen.
13:28:12 [DEBUG] Using selector: SelectSelector
13:28:12 [INFO]  üî• BOT V4 (Full Architected) STARTING...
13:28:12 [INFO] üöÄ Starting InMemoryStateManager...
13:28:12 [INFO] üìÇ Initializing database: data/trades.db
13:28:12 [DEBUG] executing <function connect.<locals>.connector at 0x000001FFB1169DA0>
13:28:12 [DEBUG] operation <function connect.<locals>.connector at 0x000001FFB1169DA0> completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB11788B0>, 'PRAGMA foreign_keys=ON', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB11788B0>, 'PRAGMA foreign_keys=ON', []) completed
13:28:12 [DEBUG] executing <function connect.<locals>.connector at 0x000001FFB116A160>
13:28:12 [DEBUG] operation <function connect.<locals>.connector at 0x000001FFB116A160> completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1178B80>, 'PRAGMA foreign_keys=ON', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1178B80>, 'PRAGMA foreign_keys=ON', []) completed
13:28:12 [DEBUG] executing <function connect.<locals>.connector at 0x000001FFB116A340>
13:28:12 [DEBUG] operation <function connect.<locals>.connector at 0x000001FFB116A340> completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179030>, 'PRAGMA foreign_keys=ON', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179030>, 'PRAGMA foreign_keys=ON', []) completed
13:28:12 [DEBUG] executing <function connect.<locals>.connector at 0x000001FFB1169BC0>
13:28:12 [DEBUG] operation <function connect.<locals>.connector at 0x000001FFB1169BC0> completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB11795D0>, 'PRAGMA foreign_keys=ON', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB11795D0>, 'PRAGMA foreign_keys=ON', []) completed
13:28:12 [DEBUG] executing <function connect.<locals>.connector at 0x000001FFB116A700>
13:28:12 [DEBUG] operation <function connect.<locals>.connector at 0x000001FFB116A700> completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179990>, 'PRAGMA foreign_keys=ON', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179990>, 'PRAGMA foreign_keys=ON', []) completed
13:28:12 [INFO] ‚úÖ Read pool created: 5 connections
13:28:12 [DEBUG] executing <function connect.<locals>.connector at 0x000001FFB116A520>
13:28:12 [DEBUG] operation <function connect.<locals>.connector at 0x000001FFB116A520> completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, 'PRAGMA foreign_keys=ON', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, 'PRAGMA foreign_keys=ON', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, 'PRAGMA journal_mode=WAL', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, 'PRAGMA journal_mode=WAL', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, 'PRAGMA synchronous=NORMAL', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, 'PRAGMA synchronous=NORMAL', []) completed
13:28:12 [INFO] ‚úÖ WAL mode enabled
13:28:12 [INFO] üîÑ Running database migrations...
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, "\n            CREATE TABLE IF NOT EXISTS trades (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                side_x10 TEXT NOT NULL,\n                side_lighter TEXT NOT NULL,\n                size_usd REAL NOT NULL,\n                entry_price_x10 REAL,\n                entry_price_lighter REAL,\n                status TEXT DEFAULT 'open',\n                is_farm_trade INTEGER DEFAULT 0,\n                created_at INTEGER NOT NULL,\n                closed_at INTEGER,\n                pnl REAL DEFAULT 0,\n                funding_collected REAL DEFAULT 0,\n                account_label TEXT,\n                x10_order_id TEXT,\n                lighter_order_id TEXT,\n                UNIQUE(symbol, status) ON CONFLICT REPLACE\n            )\n            ", [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, "\n            CREATE TABLE IF NOT EXISTS trades (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                side_x10 TEXT NOT NULL,\n                side_lighter TEXT NOT NULL,\n                size_usd REAL NOT NULL,\n                entry_price_x10 REAL,\n                entry_price_lighter REAL,\n                status TEXT DEFAULT 'open',\n                is_farm_trade INTEGER DEFAULT 0,\n                created_at INTEGER NOT NULL,\n                closed_at INTEGER,\n                pnl REAL DEFAULT 0,\n                funding_collected REAL DEFAULT 0,\n                account_label TEXT,\n                x10_order_id TEXT,\n                lighter_order_id TEXT,\n                UNIQUE(symbol, status) ON CONFLICT REPLACE\n            )\n            ", []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_symbol ON trades(symbol)\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_symbol ON trades(symbol)\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_status ON trades(status)\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_status ON trades(status)\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_created ON trades(created_at)\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_created ON trades(created_at)\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS funding_history (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                exchange TEXT NOT NULL,\n                rate REAL NOT NULL,\n                timestamp INTEGER NOT NULL,\n                collected_amount REAL DEFAULT 0\n            )\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS funding_history (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                exchange TEXT NOT NULL,\n                rate REAL NOT NULL,\n                timestamp INTEGER NOT NULL,\n                collected_amount REAL DEFAULT 0\n            )\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_funding_symbol_ts \n            ON funding_history(symbol, timestamp)\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_funding_symbol_ts \n            ON funding_history(symbol, timestamp)\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS execution_log (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                action TEXT NOT NULL,\n                exchange TEXT NOT NULL,\n                success INTEGER NOT NULL,\n                order_id TEXT,\n                error TEXT,\n                latency_ms REAL,\n                timestamp INTEGER NOT NULL\n            )\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS execution_log (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                action TEXT NOT NULL,\n                exchange TEXT NOT NULL,\n                success INTEGER NOT NULL,\n                order_id TEXT,\n                error TEXT,\n                latency_ms REAL,\n                timestamp INTEGER NOT NULL\n            )\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS bot_state (\n                key TEXT PRIMARY KEY,\n                value TEXT NOT NULL,\n                updated_at INTEGER NOT NULL\n            )\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS bot_state (\n                key TEXT PRIMARY KEY,\n                value TEXT NOT NULL,\n                updated_at INTEGER NOT NULL\n            )\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS pnl_snapshots (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                timestamp INTEGER NOT NULL,\n                total_pnl REAL NOT NULL,\n                unrealized_pnl REAL NOT NULL,\n                realized_pnl REAL NOT NULL,\n                funding_pnl REAL NOT NULL,\n                trade_count INTEGER NOT NULL\n            )\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS pnl_snapshots (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                timestamp INTEGER NOT NULL,\n                total_pnl REAL NOT NULL,\n                unrealized_pnl REAL NOT NULL,\n                realized_pnl REAL NOT NULL,\n                funding_pnl REAL NOT NULL,\n                trade_count INTEGER NOT NULL\n            )\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_pnl_ts ON pnl_snapshots(timestamp)\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE INDEX IF NOT EXISTS idx_pnl_ts ON pnl_snapshots(timestamp)\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS _migrations (\n                id INTEGER PRIMARY KEY,\n                name TEXT NOT NULL,\n                applied_at INTEGER NOT NULL\n            )\n            ', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB1179C60>, '\n            CREATE TABLE IF NOT EXISTS _migrations (\n                id INTEGER PRIMARY KEY,\n                name TEXT NOT NULL,\n                applied_at INTEGER NOT NULL\n            )\n            ', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001FFB1179C60>)
13:28:12 [DEBUG] operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001FFB1179C60>) completed
13:28:12 [INFO] ‚úÖ Migrations complete (11 statements)
13:28:12 [INFO] ‚úÖ Database initialized
13:28:12 [INFO] üñäÔ∏è Database write loop started
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB11788B0>, "SELECT * FROM trades WHERE status = 'open' ORDER BY created_at DESC", ())
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB11788B0>, "SELECT * FROM trades WHERE status = 'open' ORDER BY created_at DESC", ()) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001FFAF15EFC0>)
13:28:12 [DEBUG] operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001FFAF15EFC0>) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001FFAF15EFC0>)
13:28:12 [DEBUG] operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001FFAF15EFC0>) completed
13:28:12 [INFO] üìÇ Loaded 3 trades from database
13:28:12 [INFO] ‚úÖ InMemoryStateManager started (loaded 3 trades)
13:28:12 [INFO] ‚úÖ State Manager started
13:28:12 [INFO]  Telegram Bot disabled (Token/ChatID missing).
13:28:12 [INFO] ‚úÖ Async database initialized
13:28:12 [DEBUG] executing <function connect.<locals>.connector at 0x000001FFB116AAC0>
13:28:12 [INFO] üìù State writer loop started
13:28:12 [DEBUG] operation <function connect.<locals>.connector at 0x000001FFB116AAC0> completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB117A3E0>, "\n                CREATE TABLE IF NOT EXISTS trade_history (\n                    id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    symbol TEXT NOT NULL,\n                    entry_time TIMESTAMP,\n                    exit_time TIMESTAMP,\n                    hold_duration_hours REAL,\n                    close_reason TEXT,\n                    final_pnl_usd REAL,\n                    funding_pnl_usd REAL,\n                    spread_pnl_usd REAL,\n                    fees_usd REAL,\n                    account_label TEXT DEFAULT 'Main'\n                )\n            ", [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB117A3E0>, "\n                CREATE TABLE IF NOT EXISTS trade_history (\n                    id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    symbol TEXT NOT NULL,\n                    entry_time TIMESTAMP,\n                    exit_time TIMESTAMP,\n                    hold_duration_hours REAL,\n                    close_reason TEXT,\n                    final_pnl_usd REAL,\n                    funding_pnl_usd REAL,\n                    spread_pnl_usd REAL,\n                    fees_usd REAL,\n                    account_label TEXT DEFAULT 'Main'\n                )\n            ", []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001FFB117A3E0>)
13:28:12 [DEBUG] operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001FFB117A3E0>) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB117A3E0>, 'PRAGMA table_info(trade_history)', [])
13:28:12 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FFB117A3E0>, 'PRAGMA table_info(trade_history)', []) completed
13:28:12 [DEBUG] executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001FFAF15E5C0>)
13:28:12 [DEBUG] operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001FFAF15E5C0>) completed
13:28:12 [DEBUG] ‚úÖ Database schema up to date
13:28:12 [DEBUG] executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001FFB117A3E0>)
13:28:12 [DEBUG] operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001FFB117A3E0>) completed
13:28:12 [INFO] Initialisiere X10 Adapter...
13:28:12 [INFO]  X10 Account initialisiert.
13:28:12 [INFO] Initialisiere Lighter Adapter...
13:28:12 [INFO] üìä Loading Market Data...
13:28:12 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
13:28:12 [INFO] ‚öôÔ∏è Lighter: Loading markets...
13:28:12 [DEBUG] Starting new HTTPS connection (1): mainnet.zklighter.elliot.ai:443
13:28:13 [DEBUG] https://mainnet.zklighter.elliot.ai:443 "GET /api/v1/nextNonce?account_index=60113&api_key_index=3 HTTP/1.1" 200 25
13:28:15 [INFO]  X10: 91 M√§rkte geladen, 91 Funding Rates, 78 Preise
13:28:32 [INFO] ‚úÖ Lighter: 118/118 markets loaded (100.0%)
13:28:32 [INFO] ‚úÖ Markets loaded: X10=91, Lighter=118
13:28:32 [INFO] üìà Pre-loading funding rates...
13:28:33 [INFO] ‚úÖ Lighter funding rates pre-loaded: 115
13:28:33 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
13:28:35 [INFO]  X10: 91 M√§rkte geladen, 91 Funding Rates, 78 Preise
13:28:35 [INFO] ‚úÖ X10 funding rates: 91
13:28:35 [INFO] üåê Starting WebSocket streams...
13:28:35 [INFO] DEBUG: About to call ws_manager.start()...
13:28:35 [INFO] üîå [lighter] WebSocket manager started
13:28:35 [INFO] üîå [x10] WebSocket manager started
13:28:35 [INFO] ‚úÖ WebSocketManager started
13:28:35 [INFO] ‚úÖ WebSocket streams connected
13:28:35 [INFO] DEBUG: ws_manager.start() completed or failed, continuing...
13:28:35 [INFO] üîç STATE RECONCILIATION: Checking DB vs Exchange...
13:28:35 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
13:28:36 [DEBUG] = connection is CONNECTING
13:28:36 [DEBUG] = connection is CONNECTING
13:28:36 [DEBUG] > GET /stream HTTP/1.1
13:28:36 [DEBUG] > Host: mainnet.zklighter.elliot.ai
13:28:36 [DEBUG] > Upgrade: websocket
13:28:36 [DEBUG] > Connection: Upgrade
13:28:36 [DEBUG] > Sec-WebSocket-Key: tMDy2JSM86b0ERqF20N92A==
13:28:36 [DEBUG] > Sec-WebSocket-Version: 13
13:28:36 [DEBUG] > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
13:28:36 [DEBUG] > User-Agent: Python/3.11 websockets/15.0.1
13:28:36 [DEBUG] > GET /stream.extended.exchange/v1/account HTTP/1.1
13:28:36 [DEBUG] > Host: api.starknet.extended.exchange
13:28:36 [DEBUG] > Upgrade: websocket
13:28:36 [DEBUG] > Connection: Upgrade
13:28:36 [DEBUG] > Sec-WebSocket-Key: dao8/nHGm606zoUZvpWchg==
13:28:36 [DEBUG] > Sec-WebSocket-Version: 13
13:28:36 [DEBUG] > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
13:28:36 [DEBUG] > X-Api-Key: a1c9207f79f0e57ddc454bf1e16dbe49
13:28:36 [DEBUG] > User-Agent: X10PythonTradingClient/0. 4.5
13:28:36 [DEBUG] < HTTP/1.1 101 Switching Protocols
13:28:36 [DEBUG] < Date: Sun, 30 Nov 2025 12:28:30 GMT
13:28:36 [DEBUG] < Connection: upgrade
13:28:36 [DEBUG] < Upgrade: websocket
13:28:36 [DEBUG] < Sec-WebSocket-Accept: DnF9zhx7IyfeYF+tof0vmhMOqJI=
13:28:36 [DEBUG] < Access-Control-Max-Age: 86400
13:28:36 [DEBUG] < Vary: Origin
13:28:36 [DEBUG] < Vary: Origin
13:28:36 [DEBUG] < Access-Control-Allow-Origin: *
13:28:36 [DEBUG] < Access-Control-Allow-Methods: GET, HEAD, POST, PATCH, PUT, DELETE
13:28:36 [DEBUG] < Access-Control-Allow-Headers: Content-Type, Origin, X-CSRF-Token, Authorization, AccessToken, Token, Range
13:28:36 [DEBUG] < Access-Control-Expose-Headers: Content-Length, Access-Control-Allow-Origin, Access-Control-Allow-Headers
13:28:36 [DEBUG] < Access-Control-Allow-Credentials: true
13:28:36 [DEBUG] = connection is OPEN
13:28:36 [DEBUG] < TEXT '{"session_id":"173dd6ea-8d99-4ed3-aadd-d765cb4d4b07","type":"connected"}' [72 bytes]
13:28:36 [INFO] ‚úÖ [lighter] Connected to wss://mainnet.zklighter.elliot.ai/stream
13:28:36 [DEBUG] < HTTP/1.1 101 Switching Protocols
13:28:36 [DEBUG] < Date: Sun, 30 Nov 2025 12:28:30 GMT
13:28:36 [DEBUG] < Connection: upgrade
13:28:36 [DEBUG] < Upgrade: websocket
13:28:36 [DEBUG] < Sec-WebSocket-Accept: u5bpA2HCwJ3DY8jMSG/secKsCyI=
13:28:36 [DEBUG] = connection is OPEN
13:28:36 [DEBUG] < TEXT '{"type":"ORDER","data":{"isSnapshot":true,"orde...:1764505710494,"seq":1}' [82 bytes]
13:28:36 [DEBUG] < TEXT '{"type":"POSITION","data":{"isSnapshot":true,"p...:1764505710494,"seq":2}' [88 bytes]
13:28:36 [DEBUG] < TEXT '{"type":"BALANCE","data":{"isSnapshot":true,"ba...:1764505710494,"seq":3}' [376 bytes]
13:28:36 [INFO] ‚úÖ [x10] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/account
13:28:37 [INFO] Lighter: Found 3 open positions
13:28:37 [INFO] ‚úì All DB trades match exchange positions
13:28:37 [INFO] üìä Final state: 3 open trades
13:28:37 [DEBUG] < PING '[ping 406904f5f9c01f13e3f7e4400aca79039ca99259a...57d80cf284fcabb81 ping]' [text, 76 bytes]
13:28:37 [DEBUG] > PONG '[ping 406904f5f9c01f13e3f7e4400aca79039ca99259a...57d80cf284fcabb81 ping]' [text, 76 bytes]
13:28:39 [DEBUG] < PING '[ping 7b7e0b862b5eb0ae8d53c23a59f923b856b003409...3bd116f138c158c0e ping]' [text, 76 bytes]
13:28:39 [DEBUG] > PONG '[ping 7b7e0b862b5eb0ae8d53c23a59f923b856b003409...3bd116f138c158c0e ping]' [text, 76 bytes]
13:28:39 [INFO] ‚è≥ Waiting for WebSocket connections...
13:28:39 [INFO] Starting emergency_position_cleanup (interval=3600s, max_age_hours=48.0)
13:28:39 [DEBUG] Fetching fresh positions (force=True, cache_age=1764505719.6s)
13:28:39 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
13:28:40 [INFO] Lighter: Found 3 open positions
13:28:40 [INFO] üìä Positions: X10=0, Lighter=3
13:28:40 [DEBUG] Lighter positions: ['APT-USD', 'KAITO-USD', 'ZRO-USD']
13:28:40 [DEBUG] < PING '[ping 08f4bcf6aeb5c0db54c8ca36209ca049a641d9911...d07f8828966b60130 ping]' [text, 76 bytes]
13:28:40 [DEBUG] > PONG '[ping 08f4bcf6aeb5c0db54c8ca36209ca049a641d9911...d07f8828966b60130 ping]' [text, 76 bytes]
13:28:41 [DEBUG] < PING '[ping 5343cb1ea1ff0d269fc932bb9fb931d8cc83bbe93...d6509ee0c0e81b387 ping]' [text, 76 bytes]
13:28:41 [DEBUG] > PONG '[ping 5343cb1ea1ff0d269fc932bb9fb931d8cc83bbe93...d6509ee0c0e81b387 ping]' [text, 76 bytes]
13:28:42 [DEBUG] < PING '[ping 9ede21f88087e53eb3671bb89ff975534c70e0997...bb20db95f19b28fc2 ping]' [text, 76 bytes]
13:28:42 [DEBUG] > PONG '[ping 9ede21f88087e53eb3671bb89ff975534c70e0997...bb20db95f19b28fc2 ping]' [text, 76 bytes]
13:28:44 [DEBUG] < PING '[ping f5d5525b5097e53fc3973f584bd990174a674d35a...70888ccf59993ba92 ping]' [text, 76 bytes]
13:28:44 [DEBUG] > PONG '[ping f5d5525b5097e53fc3973f584bd990174a674d35a...70888ccf59993ba92 ping]' [text, 76 bytes]
13:28:44 [INFO] üîç Verifying WebSocket health...
13:28:45 [DEBUG] < PING '[ping 2bde499d085755031ac197d795fd270f45d57caf3...1fd769b3df3fc1eac ping]' [text, 76 bytes]
13:28:45 [DEBUG] > PONG '[ping 2bde499d085755031ac197d795fd270f45d57caf3...1fd769b3df3fc1eac ping]' [text, 76 bytes]
13:28:46 [INFO] üìä Cache status: X10=78 prices, Lighter=118 prices
13:28:46 [INFO] ‚úÖ WebSocket streams healthy - receiving price updates
13:28:46 [INFO] üìä Refreshing missing prices...
13:28:46 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
13:28:46 [DEBUG] < PING '[ping 256ce7b702342afc28c7b084da865a3177b51a7ac...ef3db8c4aac03aacb ping]' [text, 76 bytes]
13:28:46 [DEBUG] > PONG '[ping 256ce7b702342afc28c7b084da865a3177b51a7ac...ef3db8c4aac03aacb ping]' [text, 76 bytes]
13:28:47 [DEBUG] < PING '[ping 103d1724c84fcfc8a845b9491191df30ac2092a22...1b05ef1ec375e6bb0 ping]' [text, 76 bytes]
13:28:47 [DEBUG] > PONG '[ping 103d1724c84fcfc8a845b9491191df30ac2092a22...1b05ef1ec375e6bb0 ping]' [text, 76 bytes]
13:28:48 [INFO]  X10: 91 M√§rkte geladen, 91 Funding Rates, 78 Preise
13:28:48 [INFO] BOT L√ÑUFT 24/7 ‚Äì Tasks √ºberwacht | Ctrl+C = Stop
13:28:48 [INFO] Logic Loop gestartet ‚Äì REFRESH alle 3s
13:28:48 [DEBUG] MAX_OPEN_TRADES (3) reached, waiting...
13:28:48 [DEBUG] üìä X10 Funding Cache refresh (current=91)
13:28:48 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
13:28:48 [INFO] üõ°Ô∏è Trade Management Loop gestartet
13:28:48 [DEBUG] Fetching fresh positions (force=False, cache_age=9.1s)
13:28:48 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
13:28:49 [INFO] Lighter: Found 3 open positions
13:28:49 [INFO] üìä Positions: X10=0, Lighter=3
13:28:49 [DEBUG] Lighter positions: ['APT-USD', 'KAITO-USD', 'ZRO-USD']
13:28:49 [INFO]  Volatility Monitor initialized: Low<3.0%, Normal<10.0%, High<20.0%, Hard Cap<50.0%
13:28:49 [DEBUG] < PING '[ping e498949ce14ce8e585e310aa718d735047cc541f4...2939cf28e72bec7a4 ping]' [text, 76 bytes]
13:28:49 [DEBUG] > PONG '[ping e498949ce14ce8e585e310aa718d735047cc541f4...2939cf28e72bec7a4 ping]' [text, 76 bytes]
13:28:50 [DEBUG] Using cached positions (age: 1.5s)
13:28:50 [DEBUG] < PING '[ping 607c5cc2036d0c2d8202d27ec415ce94cde131780...6601b38dec3088590 ping]' [text, 76 bytes]
13:28:50 [DEBUG] > PONG '[ping 607c5cc2036d0c2d8202d27ec415ce94cde131780...6601b38dec3088590 ping]' [text, 76 bytes]
13:28:50 [INFO]  X10: 91 M√§rkte geladen, 91 Funding Rates, 78 Preise
13:28:50 [DEBUG] X10: Funding Refresh OK, cache=91
13:28:50 [DEBUG] üìä Lighter Funding Cache refresh (current=115)
13:28:51 [DEBUG] Using cached positions (age: 2.5s)
13:28:51 [DEBUG] Lighter: Loaded 389 funding rates
13:28:51 [DEBUG] Lighter: Funding Refresh OK, cache=118
13:28:51 [INFO] FundingPredictorV2 ‚Üí FINAL BULLETPROOF VERSION
13:28:51 [DEBUG] MAX_OPEN_TRADES (3) reached, waiting...
13:28:51 [DEBUG] < PING '[ping 2e8f71710e99140f89b032e8ae1dde0e77b32cd94...ff31da2f25a786572 ping]' [text, 76 bytes]
13:28:51 [DEBUG] > PONG '[ping 2e8f71710e99140f89b032e8ae1dde0e77b32cd94...ff31da2f25a786572 ping]' [text, 76 bytes]
13:28:51 [DEBUG] > PING 98 fa 07 27 [binary, 4 bytes]
13:28:51 [DEBUG] % sent keepalive ping
13:28:52 [DEBUG] Using cached positions (age: 3.5s)
13:28:52 [DEBUG] < PONG 98 fa 07 27 [binary, 4 bytes]
13:28:52 [DEBUG] % received keepalive pong
13:28:52 [DEBUG] < PING '[ping bf7cb4bb7a0e05fed919d6bb0e8a76fc1f5086a74...baa9a48c5df18ad22 ping]' [text, 76 bytes]
13:28:52 [DEBUG] > PONG '[ping bf7cb4bb7a0e05fed919d6bb0e8a76fc1f5086a74...baa9a48c5df18ad22 ping]' [text, 76 bytes]
13:28:53 [DEBUG] Using cached positions (age: 4.5s)
13:28:54 [INFO] Shutdown angefordert ‚Äì beende sauber...
13:28:54 [INFO] SHUTDOWN_FLAG gesetzt - keine neuen Trades mehr
13:28:54 [DEBUG] < PING '[ping e827f90b27dd33d492b01528fd771b735b2032e9f...7a1104bcb817cc1b7 ping]' [text, 76 bytes]
13:28:54 [DEBUG] > PONG '[ping e827f90b27dd33d492b01528fd771b735b2032e9f...7a1104bcb817cc1b7 ping]' [text, 76 bytes]
13:28:54 [INFO] Cancelling main tasks...
13:28:54 [INFO] Cancelling symbol tasks...
13:28:54 [INFO] Stopping Managers...
13:28:54 [DEBUG] > CLOSE 1000 (OK) [2 bytes]
13:28:54 [DEBUG] = connection is CLOSING
13:28:54 [DEBUG] > CLOSE 1000 (OK) [2 bytes]
13:28:54 [DEBUG] = connection is CLOSING
13:28:54 [DEBUG] < CLOSE 1000 (OK) [2 bytes]
13:28:54 [DEBUG] < EOF
13:28:54 [DEBUG] > EOF
13:28:54 [DEBUG] = connection is CLOSED
13:28:54 [DEBUG] x closing TCP connection
13:28:54 [INFO] üîå [lighter] WebSocket stopped
13:28:54 [DEBUG] < CLOSE 1000 (OK) [2 bytes]
13:28:56 [INFO] üìù State writer loop stopped
13:28:56 [INFO] emergency_position_cleanup cancelled
13:28:56 [INFO] üñäÔ∏è Database write loop stopped
