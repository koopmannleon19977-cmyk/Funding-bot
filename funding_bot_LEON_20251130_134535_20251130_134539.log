13:45:39 [INFO]  CONFIG VALIDIERUNG abgeschlossen.
13:45:39 [DEBUG] Using selector: SelectSelector
13:45:39 [INFO]  üî• BOT V4 (Full Architected) STARTING...
13:45:39 [INFO] üöÄ Starting InMemoryStateManager...
13:45:39 [INFO] üìÇ Initializing database: data/trades.db
13:45:39 [DEBUG] executing <function connect.<locals>.connector at 0x00000290FAA2DA80>
13:45:39 [DEBUG] operation <function connect.<locals>.connector at 0x00000290FAA2DA80> completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA38C70>, 'PRAGMA foreign_keys=ON', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA38C70>, 'PRAGMA foreign_keys=ON', []) completed
13:45:39 [DEBUG] executing <function connect.<locals>.connector at 0x00000290FAA2DE40>
13:45:39 [DEBUG] operation <function connect.<locals>.connector at 0x00000290FAA2DE40> completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA38F40>, 'PRAGMA foreign_keys=ON', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA38F40>, 'PRAGMA foreign_keys=ON', []) completed
13:45:39 [DEBUG] executing <function connect.<locals>.connector at 0x00000290FAA2E020>
13:45:39 [DEBUG] operation <function connect.<locals>.connector at 0x00000290FAA2E020> completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA393F0>, 'PRAGMA foreign_keys=ON', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA393F0>, 'PRAGMA foreign_keys=ON', []) completed
13:45:39 [DEBUG] executing <function connect.<locals>.connector at 0x00000290FAA2D8A0>
13:45:39 [DEBUG] operation <function connect.<locals>.connector at 0x00000290FAA2D8A0> completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA39990>, 'PRAGMA foreign_keys=ON', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA39990>, 'PRAGMA foreign_keys=ON', []) completed
13:45:39 [DEBUG] executing <function connect.<locals>.connector at 0x00000290FAA2E3E0>
13:45:39 [DEBUG] operation <function connect.<locals>.connector at 0x00000290FAA2E3E0> completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA39D50>, 'PRAGMA foreign_keys=ON', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA39D50>, 'PRAGMA foreign_keys=ON', []) completed
13:45:39 [INFO] ‚úÖ Read pool created: 5 connections
13:45:39 [DEBUG] executing <function connect.<locals>.connector at 0x00000290FAA2E200>
13:45:39 [DEBUG] operation <function connect.<locals>.connector at 0x00000290FAA2E200> completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, 'PRAGMA foreign_keys=ON', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, 'PRAGMA foreign_keys=ON', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, 'PRAGMA journal_mode=WAL', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, 'PRAGMA journal_mode=WAL', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, 'PRAGMA synchronous=NORMAL', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, 'PRAGMA synchronous=NORMAL', []) completed
13:45:39 [INFO] ‚úÖ WAL mode enabled
13:45:39 [INFO] üîÑ Running database migrations...
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, "\n            CREATE TABLE IF NOT EXISTS trades (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                side_x10 TEXT NOT NULL,\n                side_lighter TEXT NOT NULL,\n                size_usd REAL NOT NULL,\n                entry_price_x10 REAL,\n                entry_price_lighter REAL,\n                status TEXT DEFAULT 'open',\n                is_farm_trade INTEGER DEFAULT 0,\n                created_at INTEGER NOT NULL,\n                closed_at INTEGER,\n                pnl REAL DEFAULT 0,\n                funding_collected REAL DEFAULT 0,\n                account_label TEXT,\n                x10_order_id TEXT,\n                lighter_order_id TEXT,\n                UNIQUE(symbol, status) ON CONFLICT REPLACE\n            )\n            ", [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, "\n            CREATE TABLE IF NOT EXISTS trades (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                side_x10 TEXT NOT NULL,\n                side_lighter TEXT NOT NULL,\n                size_usd REAL NOT NULL,\n                entry_price_x10 REAL,\n                entry_price_lighter REAL,\n                status TEXT DEFAULT 'open',\n                is_farm_trade INTEGER DEFAULT 0,\n                created_at INTEGER NOT NULL,\n                closed_at INTEGER,\n                pnl REAL DEFAULT 0,\n                funding_collected REAL DEFAULT 0,\n                account_label TEXT,\n                x10_order_id TEXT,\n                lighter_order_id TEXT,\n                UNIQUE(symbol, status) ON CONFLICT REPLACE\n            )\n            ", []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_symbol ON trades(symbol)\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_symbol ON trades(symbol)\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_status ON trades(status)\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_status ON trades(status)\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_created ON trades(created_at)\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_trades_created ON trades(created_at)\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS funding_history (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                exchange TEXT NOT NULL,\n                rate REAL NOT NULL,\n                timestamp INTEGER NOT NULL,\n                collected_amount REAL DEFAULT 0\n            )\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS funding_history (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                exchange TEXT NOT NULL,\n                rate REAL NOT NULL,\n                timestamp INTEGER NOT NULL,\n                collected_amount REAL DEFAULT 0\n            )\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_funding_symbol_ts \n            ON funding_history(symbol, timestamp)\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_funding_symbol_ts \n            ON funding_history(symbol, timestamp)\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS execution_log (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                action TEXT NOT NULL,\n                exchange TEXT NOT NULL,\n                success INTEGER NOT NULL,\n                order_id TEXT,\n                error TEXT,\n                latency_ms REAL,\n                timestamp INTEGER NOT NULL\n            )\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS execution_log (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                symbol TEXT NOT NULL,\n                action TEXT NOT NULL,\n                exchange TEXT NOT NULL,\n                success INTEGER NOT NULL,\n                order_id TEXT,\n                error TEXT,\n                latency_ms REAL,\n                timestamp INTEGER NOT NULL\n            )\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS bot_state (\n                key TEXT PRIMARY KEY,\n                value TEXT NOT NULL,\n                updated_at INTEGER NOT NULL\n            )\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS bot_state (\n                key TEXT PRIMARY KEY,\n                value TEXT NOT NULL,\n                updated_at INTEGER NOT NULL\n            )\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS pnl_snapshots (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                timestamp INTEGER NOT NULL,\n                total_pnl REAL NOT NULL,\n                unrealized_pnl REAL NOT NULL,\n                realized_pnl REAL NOT NULL,\n                funding_pnl REAL NOT NULL,\n                trade_count INTEGER NOT NULL\n            )\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS pnl_snapshots (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                timestamp INTEGER NOT NULL,\n                total_pnl REAL NOT NULL,\n                unrealized_pnl REAL NOT NULL,\n                realized_pnl REAL NOT NULL,\n                funding_pnl REAL NOT NULL,\n                trade_count INTEGER NOT NULL\n            )\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_pnl_ts ON pnl_snapshots(timestamp)\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE INDEX IF NOT EXISTS idx_pnl_ts ON pnl_snapshots(timestamp)\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS _migrations (\n                id INTEGER PRIMARY KEY,\n                name TEXT NOT NULL,\n                applied_at INTEGER NOT NULL\n            )\n            ', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, '\n            CREATE TABLE IF NOT EXISTS _migrations (\n                id INTEGER PRIMARY KEY,\n                name TEXT NOT NULL,\n                applied_at INTEGER NOT NULL\n            )\n            ', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000290FAA3A020>)
13:45:39 [DEBUG] operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000290FAA3A020>) completed
13:45:39 [INFO] ‚úÖ Migrations complete (11 statements)
13:45:39 [INFO] ‚úÖ Database initialized
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA38C70>, "SELECT * FROM trades WHERE status = 'open' ORDER BY created_at DESC", ())
13:45:39 [INFO] üñäÔ∏è Database write loop started
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA38C70>, "SELECT * FROM trades WHERE status = 'open' ORDER BY created_at DESC", ()) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000290FAA22340>)
13:45:39 [DEBUG] operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000290FAA22340>) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000290FAA22340>)
13:45:39 [DEBUG] operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000290FAA22340>) completed
13:45:39 [INFO] üìÇ Loaded 3 trades from database
13:45:39 [INFO] ‚úÖ InMemoryStateManager started (loaded 3 trades)
13:45:39 [INFO] ‚úÖ State Manager started
13:45:39 [INFO]  Telegram Bot disabled (Token/ChatID missing).
13:45:39 [INFO] ‚úÖ Async database initialized
13:45:39 [DEBUG] executing <function connect.<locals>.connector at 0x00000290FAA2E7A0>
13:45:39 [INFO] üìù State writer loop started
13:45:39 [DEBUG] operation <function connect.<locals>.connector at 0x00000290FAA2E7A0> completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A7A0>, "\n                CREATE TABLE IF NOT EXISTS trade_history (\n                    id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    symbol TEXT NOT NULL,\n                    entry_time TIMESTAMP,\n                    exit_time TIMESTAMP,\n                    hold_duration_hours REAL,\n                    close_reason TEXT,\n                    final_pnl_usd REAL,\n                    funding_pnl_usd REAL,\n                    spread_pnl_usd REAL,\n                    fees_usd REAL,\n                    account_label TEXT DEFAULT 'Main'\n                )\n            ", [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A7A0>, "\n                CREATE TABLE IF NOT EXISTS trade_history (\n                    id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    symbol TEXT NOT NULL,\n                    entry_time TIMESTAMP,\n                    exit_time TIMESTAMP,\n                    hold_duration_hours REAL,\n                    close_reason TEXT,\n                    final_pnl_usd REAL,\n                    funding_pnl_usd REAL,\n                    spread_pnl_usd REAL,\n                    fees_usd REAL,\n                    account_label TEXT DEFAULT 'Main'\n                )\n            ", []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000290FAA3A7A0>)
13:45:39 [DEBUG] operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000290FAA3A7A0>) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A7A0>, 'PRAGMA table_info(trade_history)', [])
13:45:39 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A7A0>, 'PRAGMA table_info(trade_history)', []) completed
13:45:39 [DEBUG] executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000290FAA22D40>)
13:45:39 [DEBUG] operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000290FAA22D40>) completed
13:45:39 [DEBUG] ‚úÖ Database schema up to date
13:45:39 [DEBUG] executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000290FAA3A7A0>)
13:45:39 [DEBUG] operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000290FAA3A7A0>) completed
13:45:39 [INFO] Initialisiere X10 Adapter...
13:45:39 [INFO]  X10 Account initialisiert.
13:45:39 [INFO] Initialisiere Lighter Adapter...
13:45:39 [INFO] üìä Loading Market Data...
13:45:39 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
13:45:39 [INFO] ‚öôÔ∏è Lighter: Loading markets...
13:45:39 [DEBUG] Starting new HTTPS connection (1): mainnet.zklighter.elliot.ai:443
13:45:40 [DEBUG] https://mainnet.zklighter.elliot.ai:443 "GET /api/v1/nextNonce?account_index=60113&api_key_index=3 HTTP/1.1" 200 25
13:45:42 [INFO]  X10: 91 M√§rkte geladen, 91 Funding Rates, 78 Preise
13:45:59 [INFO] ‚úÖ Lighter: 118/118 markets loaded (100.0%)
13:45:59 [INFO] ‚úÖ Markets loaded: X10=91, Lighter=118
13:45:59 [INFO] üìà Pre-loading funding rates...
13:46:01 [INFO] ‚úÖ Lighter funding rates pre-loaded: 115
13:46:01 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
13:46:03 [INFO]  X10: 91 M√§rkte geladen, 91 Funding Rates, 78 Preise
13:46:03 [INFO] ‚úÖ X10 funding rates: 91
13:46:03 [INFO] üåê Starting WebSocket streams...
13:46:03 [INFO] DEBUG: About to call ws_manager.start()...
13:46:03 [INFO] üîå [lighter] WebSocket manager started
13:46:03 [INFO] üîå [x10] WebSocket manager started
13:46:03 [INFO] ‚úÖ WebSocketManager started
13:46:03 [INFO] ‚úÖ WebSocket streams connected
13:46:03 [INFO] DEBUG: ws_manager.start() completed or failed, continuing...
13:46:03 [INFO] üîç STATE RECONCILIATION: Checking DB vs Exchange...
13:46:03 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
13:46:03 [DEBUG] = connection is CONNECTING
13:46:03 [DEBUG] = connection is CONNECTING
13:46:04 [DEBUG] > GET /stream.extended.exchange/v1/account HTTP/1.1
13:46:04 [DEBUG] > Host: api.starknet.extended.exchange
13:46:04 [DEBUG] > Upgrade: websocket
13:46:04 [DEBUG] > Connection: Upgrade
13:46:04 [DEBUG] > Sec-WebSocket-Key: 1SFz5Zz5Vh0W2APO/6bT/g==
13:46:04 [DEBUG] > Sec-WebSocket-Version: 13
13:46:04 [DEBUG] > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
13:46:04 [DEBUG] > X-Api-Key: a1c9207f79f0e57ddc454bf1e16dbe49
13:46:04 [DEBUG] > User-Agent: X10PythonTradingClient/0. 4.5
13:46:04 [DEBUG] > GET /stream HTTP/1.1
13:46:04 [DEBUG] > Host: mainnet.zklighter.elliot.ai
13:46:04 [DEBUG] > Upgrade: websocket
13:46:04 [DEBUG] > Connection: Upgrade
13:46:04 [DEBUG] > Sec-WebSocket-Key: xf95T+iXLrm1QitPSwdAMA==
13:46:04 [DEBUG] > Sec-WebSocket-Version: 13
13:46:04 [DEBUG] > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
13:46:04 [DEBUG] > User-Agent: Python/3.11 websockets/15.0.1
13:46:04 [DEBUG] < HTTP/1.1 101 Switching Protocols
13:46:04 [DEBUG] < Date: Sun, 30 Nov 2025 12:45:58 GMT
13:46:04 [DEBUG] < Connection: upgrade
13:46:04 [DEBUG] < Upgrade: websocket
13:46:04 [DEBUG] < Sec-WebSocket-Accept: PYAFYSMf5OD5wyYVFyzyGj0O43w=
13:46:04 [DEBUG] = connection is OPEN
13:46:04 [DEBUG] < TEXT '{"type":"ORDER","data":{"isSnapshot":true,"orde...:1764506758057,"seq":1}' [82 bytes]
13:46:04 [DEBUG] < TEXT '{"type":"POSITION","data":{"isSnapshot":true,"p...:1764506758057,"seq":2}' [88 bytes]
13:46:04 [DEBUG] < TEXT '{"type":"BALANCE","data":{"isSnapshot":true,"ba...:1764506758057,"seq":3}' [376 bytes]
13:46:04 [INFO] ‚úÖ [x10] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/account
13:46:04 [DEBUG] < HTTP/1.1 101 Switching Protocols
13:46:04 [DEBUG] < Date: Sun, 30 Nov 2025 12:45:58 GMT
13:46:04 [DEBUG] < Connection: upgrade
13:46:04 [DEBUG] < Upgrade: websocket
13:46:04 [DEBUG] < Sec-WebSocket-Accept: otKufP1a/BJktmWCSyHNsfmhJgI=
13:46:04 [DEBUG] < Access-Control-Allow-Origin: *
13:46:04 [DEBUG] < Access-Control-Allow-Methods: GET, HEAD, POST, PATCH, PUT, DELETE
13:46:04 [DEBUG] < Access-Control-Allow-Headers: Content-Type, Origin, X-CSRF-Token, Authorization, AccessToken, Token, Range
13:46:04 [DEBUG] < Access-Control-Expose-Headers: Content-Length, Access-Control-Allow-Origin, Access-Control-Allow-Headers
13:46:04 [DEBUG] < Access-Control-Allow-Credentials: true
13:46:04 [DEBUG] < Access-Control-Max-Age: 86400
13:46:04 [DEBUG] < Vary: Origin
13:46:04 [DEBUG] < Vary: Origin
13:46:04 [DEBUG] = connection is OPEN
13:46:04 [DEBUG] < TEXT '{"session_id":"e7622c5a-ae8c-48b6-8fa0-1c1101225ed6","type":"connected"}' [72 bytes]
13:46:04 [INFO] ‚úÖ [lighter] Connected to wss://mainnet.zklighter.elliot.ai/stream
13:46:05 [INFO] Lighter: Found 0 open positions
13:46:05 [WARNING] üëª GHOST TRADE: APT-USD in DB but NOT on exchanges - cleaning DB
13:46:05 [INFO] ‚úÖ Trade APT-USD closed (PnL: $0.00)
13:46:05 [DEBUG] executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, "\n            UPDATE trades \n            SET status = 'closed', \n                closed_at = ?, \n                pnl = ?,\n                funding_collected = ?\n            WHERE symbol = ?  AND status = 'open'\n        ", (1764506765202, 0, 0, 'APT-USD'))
13:46:05 [DEBUG] operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000290FAA3A020>, "\n            UPDATE trades \n            SET status = 'closed', \n                closed_at = ?, \n                pnl = ?,\n                funding_collected = ?\n            WHERE symbol = ?  AND status = 'open'\n        ", (1764506765202, 0, 0, 'APT-USD')) completed
13:46:05 [DEBUG] üìù Flushed 1 writes
13:46:05 [DEBUG] executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000290FAA3A020>)
13:46:05 [DEBUG] operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000290FAA3A020>) completed
13:46:05 [DEBUG] üìù Flushed 1 writes in 16.0ms
13:46:05 [WARNING] üëª GHOST TRADE: KAITO-USD in DB but NOT on exchanges - cleaning DB
13:46:05 [INFO] ‚úÖ Trade KAITO-USD closed (PnL: $0.00)
13:46:05 [WARNING] üëª GHOST TRADE: ZRO-USD in DB but NOT on exchanges - cleaning DB
13:46:05 [INFO] ‚úÖ Trade ZRO-USD closed (PnL: $0.00)
13:46:05 [DEBUG] < PING '[ping eeeadb877baea08369d7ed30b4162ca344075059d...9f803175ff02c2005 ping]' [text, 76 bytes]
13:46:05 [DEBUG] > PONG '[ping eeeadb877baea08369d7ed30b4162ca344075059d...9f803175ff02c2005 ping]' [text, 76 bytes]
13:46:05 [WARNING] üßπ Cleaned 3 ghost trades from DB
13:46:05 [INFO] üìä Final state: 0 open trades
13:46:06 [INFO] üñäÔ∏è Database write loop stopped
13:46:06 [DEBUG] < PING '[ping dafbfde914cc9d68e69781367725c152482df079a...6fbefb716eb1afe06 ping]' [text, 76 bytes]
13:46:06 [DEBUG] > PONG '[ping dafbfde914cc9d68e69781367725c152482df079a...6fbefb716eb1afe06 ping]' [text, 76 bytes]
13:46:07 [DEBUG] < PING '[ping ce336a45bd5c351ccc44f742d3a57905e5c68f0cb...bc233fdac5fcc562e ping]' [text, 76 bytes]
13:46:07 [DEBUG] > PONG '[ping ce336a45bd5c351ccc44f742d3a57905e5c68f0cb...bc233fdac5fcc562e ping]' [text, 76 bytes]
