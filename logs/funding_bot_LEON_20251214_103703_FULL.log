10:37:04 [INFO] âœ… CONFIG VALIDATION COMPLETED.
10:37:07 [INFO] ğŸ›¡ï¸ Lighter Rate Limiter Tier: STANDARD
10:37:07 [DEBUG] âœ… Decimal adapter registered for SQLite
10:37:07 [INFO] ğŸ”¥ BOT V5 (Architected) STARTING...
10:37:07 [INFO] ğŸš€ Starting InMemoryStateManager...
10:37:07 [INFO] ğŸ“‚ Initializing database: data/trades.db
10:37:07 [INFO] âœ… Read pool created: 5 connections
10:37:07 [INFO] âœ… WAL mode enabled
10:37:07 [INFO] ğŸ”„ Running database migrations...
10:37:07 [INFO] âœ… Migrations complete (14 statements)
10:37:07 [INFO] âœ… Database initialized
10:37:07 [INFO] ğŸ–Šï¸ Database write loop started
10:37:07 [DEBUG] Maintenance not due (Last: 16h ago)
10:37:07 [INFO] ğŸ“‚ Loaded 0 trades from database
10:37:07 [INFO] âœ… InMemoryStateManager started (loaded 0 trades)
10:37:07 [INFO] âœ… State Manager started
10:37:07 [INFO]  Telegram Bot disabled (Token/ChatID missing).
10:37:07 [INFO] âœ… Async database initialized
10:37:07 [INFO] ğŸ“ State writer loop started
10:37:07 [DEBUG] âœ… Database schema up to date
10:37:07 [INFO] Initialisiere X10 Adapter...
10:37:07 [INFO]  X10 Account initialisiert.
10:37:07 [INFO] Initialisiere Lighter Adapter...
10:37:07 [INFO] âœ… Using SaferSignerClient subclass instead of Monkey-Patch
10:37:07 [INFO] ğŸ’° Checking exchange balances at startup...
10:37:07 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/balance
10:37:08 [INFO] ğŸ’° X10 verfÃ¼gbare Balance: $204.60 USDC
10:37:08 [DEBUG] Starting new HTTPS connection (1): mainnet.zklighter.elliot.ai:443
10:37:09 [DEBUG] https://mainnet.zklighter.elliot.ai:443 "GET /api/v1/nextNonce?account_index=60113&api_key_index=3 HTTP/1.1" 200 25
10:37:11 [DEBUG] Lighter Balance: Raw=$249.10, Safe=$236.64
10:37:11 [INFO] ğŸ’° STARTUP BALANCE CHECK: X10=$204.60, Lighter=$236.64
10:37:11 [INFO] âœ… Exchange balances OK - Bot can trade!
10:37:11 [INFO] ğŸ’° FeeManager initialized (Dynamic Fees: ENABLED)
10:37:11 [DEBUG] FeeManager: Adapters set (X10=True, Lighter=True)
10:37:11 [INFO] âœ… Lighter Fee Check OK: Maker=0.0, Taker=0.0
10:37:11 [INFO] âœ… Lighter Fees updated: Maker=0.000000, Taker=0.000000 (source=api)
10:37:12 [INFO] âœ… X10 Fee Schedule (REST /api/v1/user/fees): Maker=0.000000, Taker=0.000225
10:37:12 [INFO] âœ… X10 Fees updated: Maker=0.000000, Taker=0.000225 (source=api)
10:37:12 [INFO] âœ… FeeManager started with periodic refresh
10:37:12 [INFO] âœ… FeeManager started
10:37:12 [INFO] âœ… Funding Tracker started (updates every 3600s)
10:37:12 [INFO] âœ… FundingTracker started
10:37:12 [INFO] ğŸ“Š Loading Market Data via REST...
10:37:12 [INFO] ğŸ”„ Funding tracking loop started...
10:37:12 [DEBUG] ğŸ“Š No open trades to track
10:37:12 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
10:37:13 [INFO] Lighter: Found 0 open positions
10:37:13 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:14 [INFO] âœ… Lighter: Loaded 115 markets (base data)
10:37:14 [DEBUG] ğŸ“¸ PnL Snapshot saved: total=$90.1224, uPnL=$0.0000, rPnL=$90.1224
10:37:14 [DEBUG] ğŸ“¸ PnL Snapshot: total=$90.1224 (uPnL=$0.0000, rPnL=$90.1224, funding=$0.0000)
10:37:14 [DEBUG] ğŸ“ Flushed 1 writes in 0.0ms
10:37:14 [INFO]  X10: 91 MÃ¤rkte geladen, 91 Funding Rates, 78 Preise
10:37:14 [INFO] âœ… Lighter: Updated 114 markets with size_decimals from API
10:37:14 [INFO] ğŸ“Š MARKET ADA-USD: size_decimals=1, price_decimals=5, min_base_amount=10.0
10:37:14 [INFO] ğŸ“Š MARKET SEI-USD: size_decimals=1, price_decimals=5, min_base_amount=50.0
10:37:14 [INFO] ğŸ“Š MARKET RESOLV-USD: size_decimals=0, price_decimals=6, min_base_amount=40.0
10:37:14 [INFO] ğŸ“Š MARKET TIA-USD: size_decimals=1, price_decimals=5, min_base_amount=3.0
10:37:14 [INFO] âœ… Markets loaded: X10=91, Lighter=115
10:37:14 [INFO] ğŸ“ˆ Pre-loading Lighter prices...
10:37:14 [DEBUG] Lighter: Loaded 111 funding rates
10:37:15 [DEBUG] Lighter: Loaded 117 prices via REST
10:37:15 [INFO] âœ… Lighter prices loaded: 117 symbols
10:37:15 [INFO] ğŸ”¥ Warming up execution clients (Network Handshake)...
10:37:15 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
10:37:17 [INFO] âœ… Execution clients warmed up & NETWORK READY
10:37:17 [INFO] å¯åŠ¨ OI Tracker fÃ¼r 64 Symbole...
10:37:17 [INFO] âœ… OpenInterestTracker started (interval=15.0s)
10:37:17 [INFO] ğŸŒ Starting WebSocket Manager...
10:37:17 [INFO] ğŸ“š OrderbookProvider connected to WebSocketManager
10:37:17 [INFO] âœ… OrderbookProvider initialized and connected to WebSocketManager
10:37:17 [INFO] ğŸ“Š OI Tracker: Starting cycle 1 (64 symbols)
10:37:17 [INFO] ğŸ”Œ [lighter] WebSocket manager started
10:37:17 [INFO] ğŸ”Œ [x10_account] WebSocket manager started
10:37:17 [INFO] ğŸ”Œ [x10_trades] WebSocket manager started
10:37:17 [INFO] ğŸ”Œ [x10_funding] WebSocket manager started
10:37:17 [INFO] ğŸ”Œ [x10_orderbooks] WebSocket manager started
10:37:17 [INFO] ğŸ”Œ [lighter] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': None, 'ping_timeout': None}
10:37:17 [INFO] ğŸ”Œ [x10_account] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': 15.0, 'ping_timeout': None, 'additional_headers': {'X-Api-Key': '***MASKED***', 'User-Agent': 'X10PythonTradingClient/0.4.5'}}
10:37:17 [INFO] ğŸ”Œ [x10_trades] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': 15.0, 'ping_timeout': None, 'additional_headers': {'X-Api-Key': '***MASKED***', 'User-Agent': 'X10PythonTradingClient/0.4.5'}}
10:37:17 [INFO] ğŸ”Œ [x10_funding] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': 15.0, 'ping_timeout': None, 'additional_headers': {'X-Api-Key': '***MASKED***', 'User-Agent': 'X10PythonTradingClient/0.4.5'}}
10:37:17 [INFO] ğŸ”Œ [x10_orderbooks] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': 15.0, 'ping_timeout': None, 'additional_headers': {'X-Api-Key': '***MASKED***', 'User-Agent': 'X10PythonTradingClient/0.4.5'}}
10:37:17 [INFO] âœ… WebSocketManager started (Lighter + X10 Account/Trades/Funding + Keepalive)
10:37:17 [INFO] ğŸ“Š [lighter] Subscribed to market_stats/all (prices, funding, OI for all markets)
10:37:17 [INFO] ğŸ’“ [x10_account] Keepalive loop started
10:37:18 [INFO] âœ… [lighter] Subscribed to 64 channels (1 market_stats/all + 63 order_books)
10:37:18 [INFO] â„¹ï¸ [lighter] Orderbook data: REST polling only (WS deltas disabled)
10:37:18 [INFO] [x10] Connected to Firehose streams (Trades & Funding) for all markets.
10:37:18 [INFO] ğŸ”— Components Wired: WS -> OI Tracker -> Prediction
10:37:18 [INFO] ğŸ§Ÿ Starte Zombie-Check: Vergleiche DB mit echten Positionen...
10:37:18 [INFO] ğŸ§Ÿ Reverse Ghost Check: Suche Positionen auf Exchange ohne DB Entry...
10:37:18 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:18 [DEBUG] âœ… OP-USD: X10=$179,556, Lighter=$3,618,705, Total=$3,798,261
10:37:18 [INFO] âœ… [lighter] Connected to wss://mainnet.zklighter.elliot.ai/stream
10:37:18 [INFO] [lighter] Resubscribing to 64 channels (paced)...
10:37:18 [INFO] [lighter] Receive loop started (async iterator)
10:37:18 [INFO] ğŸ’“ [lighter] Passive mode - waiting for SERVER pings (every ~60-90s)
10:37:18 [DEBUG] ğŸ’“ [lighter] Heartbeat started (stale_threshold=180.0s, json_ping_interval=Nones)
10:37:18 [INFO] âœ… [x10_account] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/account
10:37:18 [INFO] âœ… [x10_account] Keepalive enabled: ping_interval=15.0s, ping_timeout=None (auto-pong)
10:37:18 [INFO] [x10_account] Receive loop started (async iterator)
10:37:18 [DEBUG] ğŸ’“ [x10_account] Heartbeat started (stale_threshold=300.0s, json_ping_interval=Nones)
10:37:18 [DEBUG] ğŸ“¨ [x10_account] RAW: POSITION - {
  "type": "POSITION",
  "data": {
    "isSnapshot": true,
    "positions": []
  },
  "ts": 1765705023679,
  "seq": 1
}
10:37:18 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': True, 'balance': {'collateralName': 'USD', 'balance': '204.604091', 'status': 'ACTIVE', 'equity': '204.604091', 'availableForTrade': '204.604091', 'available
10:37:18 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.604091, available=$204.604091, uPnL=$0.000000
10:37:18 [DEBUG] ğŸ“¨ [x10_account] RAW: ORDER - {'type': 'ORDER', 'data': {'isSnapshot': True, 'orders': []}, 'ts': 1765705023679, 'seq': 3}
10:37:18 [INFO] âœ… [x10_orderbooks] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/orderbooks
10:37:18 [INFO] âœ… [x10_orderbooks] Keepalive enabled: ping_interval=15.0s, ping_timeout=None (auto-pong)
10:37:18 [INFO] [x10_orderbooks] Receive loop started (async iterator)
10:37:18 [DEBUG] ğŸ’“ [x10_orderbooks] Heartbeat started (stale_threshold=180.0s, json_ping_interval=Nones)
10:37:18 [INFO] âœ… [x10_funding] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/funding
10:37:18 [INFO] âœ… [x10_funding] Keepalive enabled: ping_interval=15.0s, ping_timeout=None (auto-pong)
10:37:18 [INFO] [x10_funding] Receive loop started (async iterator)
10:37:18 [DEBUG] ğŸ’“ [x10_funding] Heartbeat started (stale_threshold=300.0s, json_ping_interval=Nones)
10:37:18 [INFO] âœ… [x10_trades] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/publicTrades
10:37:18 [INFO] âœ… [x10_trades] Keepalive enabled: ping_interval=15.0s, ping_timeout=None (auto-pong)
10:37:18 [INFO] [x10_trades] Receive loop started (async iterator)
10:37:18 [DEBUG] ğŸ’“ [x10_trades] Heartbeat started (stale_threshold=300.0s, json_ping_interval=Nones)
10:37:19 [DEBUG] [lighter] Resubscribed 10/64 channels
10:37:19 [INFO] Lighter: Found 0 open positions
10:37:19 [INFO] âœ… No orphaned positions found
10:37:19 [INFO] âœ… ParallelExecutionManager started
10:37:19 [INFO] âœ… ParallelExecutionManager started
10:37:19 [INFO] ğŸŒ Starting Dashboard API at http://0.0.0.0:8080
10:37:19 [DEBUG] Registered task: logic_loop (priority=HIGH)
10:37:19 [DEBUG] Registered task: trade_management_loop (priority=HIGH)
10:37:19 [DEBUG] Registered task: farm_loop (priority=NORMAL)
10:37:19 [DEBUG] Registered task: maintenance_loop (priority=LOW)
10:37:19 [DEBUG] Registered task: cleanup_finished_tasks (priority=LOW)
10:37:19 [DEBUG] Registered task: health_reporter (priority=LOW)
10:37:19 [DEBUG] Registered task: connection_watchdog (priority=CRITICAL)
10:37:19 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:19 [INFO]    BOT V5 RUNNING 24/7 - SUPERVISED | Ctrl+C = Stop   
10:37:19 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:19 [INFO] ğŸš€ BotEventLoop starting...
10:37:19 [INFO] â–¶ï¸ Started task: connection_watchdog
10:37:19 [INFO] â–¶ï¸ Started task: logic_loop
10:37:19 [INFO] â–¶ï¸ Started task: trade_management_loop
10:37:19 [INFO] â–¶ï¸ Started task: farm_loop
10:37:19 [INFO] â–¶ï¸ Started task: maintenance_loop
10:37:19 [INFO] â–¶ï¸ Started task: cleanup_finished_tasks
10:37:19 [INFO] â–¶ï¸ Started task: health_reporter
10:37:19 [INFO] âœ… Started 7 tasks
10:37:19 [INFO] ğŸ• Connection Watchdog gestartet (Timeout: 120s)
10:37:19 [INFO] Logic Loop gestartet â€“ REFRESH alle 3s
10:37:19 [INFO] ğŸ” RECONCILE: Starting strict sync check...
10:37:19 [INFO] ğŸ›¡ï¸ Trade Management Loop gestartet
10:37:19 [DEBUG] ğŸ“Š X10 Funding Cache refresh (current=91)
10:37:19 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
10:37:19 [DEBUG] [LIGHTER] ğŸ”„ Deduplicated: LIGHTER:fetch_open_positions (dedup window: 2.0s)
10:37:19 [DEBUG] [X10] ğŸ”„ Deduplicated: X10:fetch_open_positions (dedup window: 2.0s)
10:37:19 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:19 [DEBUG] [lighter] Resubscribed 20/64 channels
10:37:19 [DEBUG] [lighter] Resubscribed 30/64 channels
10:37:19 [DEBUG] [lighter] Resubscribed 40/64 channels
10:37:19 [INFO] âœ… RECONCILE: Sync complete.
10:37:19 [INFO] âš¡ Latency Arb Detector initialized (min_lag=5.0s, max_lag=30.0s, min_rate_diff=0.020%)
10:37:19 [DEBUG] Price cache status: X10=78/64, Lighter=117/64
10:37:19 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:19 [DEBUG] [lighter] Resubscribed 50/64 channels
10:37:19 [DEBUG] [lighter] Resubscribed 60/64 channels
10:37:19 [INFO] [lighter] Resubscribed to 64 channels
10:37:19 [INFO]  Volatility Monitor initialized: Low<3.0%, Normal<10.0%, High<20.0%, Hard Cap<50.0%
10:37:19 [INFO] âœ… CRV-USD: Expected profit $0.0700 in 24.0h (breakeven: 9.85h, APY: 54.3%)
10:37:19 [INFO] âœ… Found 1 opportunities from 62 valid pairs
10:37:19 [INFO] ğŸ¯ Found 1 opportunities
10:37:19 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/balance
10:37:19 [INFO] ğŸ’° X10 verfÃ¼gbare Balance: $204.60 USDC
10:37:20 [DEBUG] âœ… KAITO-USD: X10=$224,022, Lighter=$1,955,000, Total=$2,179,022
10:37:20 [DEBUG] Lighter Balance: Raw=$249.10, Safe=$236.64
10:37:20 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:21 [INFO]  X10: 91 MÃ¤rkte geladen, 91 Funding Rates, 81 Preise
10:37:21 [INFO] Lighter: Found 0 open positions
10:37:21 [DEBUG] X10: Funding Refresh OK, cache=91
10:37:21 [DEBUG] ğŸ“Š Lighter Funding Cache refresh (current=111)
10:37:21 [INFO] ğŸ“Š Positions: X10=0, Lighter=0
10:37:21 [INFO] ğŸš€ Launching 1 trades
10:37:21 [INFO] ğŸš€ Launching CRV-USD (APY=54.3%)
10:37:21 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:21 [DEBUG] âœ… Exposure Check: 0.39x <= 5.0x
10:37:21 [DEBUG] MIN_NOTIONAL CRV-USD: min_base=20.00000000 coins, price=$0.3907, min_qty_usd=$7.81, min_notional_api=$10.00, final=$11.00
10:37:21 [INFO] ğŸ“ SIZE CRV-USD: $80.00 (DESIRED_NOTIONAL_USD=$80.00)
10:37:21 [DEBUG] ğŸ” Liquidity Check: Skipping depth check for CRV-USD (Maker Order)
10:37:21 [INFO] ğŸš€ Opening CRV-USD: Size=$80.0
10:37:21 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:21 [INFO] ğŸš€ HEDGED TRADE START: CRV-USD
10:37:21 [INFO]    Lighter: SELL $80.00 @ $0.390680
10:37:21 [INFO]    X10:     BUY $80.00 @ $0.390555
10:37:21 [INFO]    Strategy: MAKER (Lighter first, then X10 hedge)
10:37:21 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:21 [DEBUG] Lighter: Loaded 111 funding rates
10:37:21 [INFO] âœ… Launched 1 trades this cycle
10:37:21 [DEBUG] Lighter REST GET /api/v1/orders returned 404 (no data - OK)
10:37:21 [DEBUG] ğŸ§¹ [PRE-TRADE] CRV-USD: No orders found via API, but attempting cancel_all_orders anyway (defensive cleanup)
10:37:21 [DEBUG] ğŸ§¹ [PRE-TRADE] CRV-USD: cancel_all_orders() executed (no orders found or already cancelled)
10:37:21 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/orders?
10:37:21 [DEBUG] [x10_account] Firehose/Account stream - no explicit subscription needed
10:37:21 [DEBUG] [x10_trades] Firehose/Account stream - no explicit subscription needed
10:37:21 [DEBUG] [x10_funding] Firehose/Account stream - no explicit subscription needed
10:37:22 [DEBUG] Lighter REST GET /api/v1/orders returned 404 (no data - OK)
10:37:22 [INFO] âš–ï¸ Size Alignment CRV-USD: 80.00$ -> 79.70$ (204.000000 Coins) to match both exchanges (X10 Step: 1.0, Lighter Step: 0.0001)
10:37:22 [INFO] ğŸ“‹ [PHASE 0] CRV-USD:  Validating orderbook...
10:37:22 [DEBUG] âœ… ZRO-USD: X10=$190,851, Lighter=$569,792, Total=$760,643
10:37:23 [DEBUG] ğŸ“š CRV-USD Lighter orderbook refreshed via REST
10:37:23 [DEBUG] ğŸ“š CRV-USD Orderbook state: 20 bids, 20 asks, timestamp=1765705043.1378584
10:37:23 [DEBUG] OrderbookValidator initialized with profile=lighter: min_depth=$50.0, min_levels=1/1, max_spread=2.0%
10:37:23 [DEBUG] âœ… CRV-USD Orderbook excellent for SELL Maker (profile=lighter): Orderbook healthy: 20 bids, $343506 depth, 0.02% spread
10:37:23 [INFO] âœ… [PHASE 0] CRV-USD: Orderbook validation PASSED (1.08s)
10:37:23 [INFO] ğŸ“¤ [PHASE 1] CRV-USD: Placing Lighter SELL order...
10:37:23 [INFO]    Size: $79.70 (204.000000 coins)
10:37:23 [INFO] ğŸš€ LIGHTER OPEN CRV-USD: side=SELL, size_usd=$79.70, amount=204.0, price=$0.390680, TIF=None
10:37:23 [DEBUG] ğŸ” DEBUG: CRV-USD market_id = 36 (raw=36, type=<class 'int'>)
10:37:23 [INFO] ğŸ›¡ï¸ Maker Price CRV-USD SELL: $0.390640 (Ask-1 Tick (Penny Jump - Priority Fill!) | Bid=$0.39056, Ask=$0.39065, Tick=1e-05)
10:37:23 [DEBUG] QUANTIZE CRV-USD: Notional=$79.69872000000001 -> RawAmt=204.000000 -> QuantAmt=204.000000 (x0.0001) -> BaseInt=2040
10:37:23 [DEBUG] ğŸ“‹ [TIF] CRV-USD: Using TIF=1, expiry=-1 (not IOC)
10:37:23 [DEBUG] ğŸ”„ Nonce pool refilled: 20 nonces starting at 7713
10:37:23 [DEBUG] âš¡ Using nonce 7713 (pool: 19 remaining)
10:37:23 [INFO] ğŸ”’ Locked execution for CRV-USD SELL (Nonce: 7713)...
10:37:23 [DEBUG] âœ… [ORDER_TYPE] CRV-USD: Using ORDER_TYPE_LIMIT = 0
10:37:23 [DEBUG] â„¹ï¸ [ORDER_TYPE] CRV-USD: ORDER_TYPE_MARKET = 1 (available but not used for limit orders)
10:37:23 [DEBUG] âœ… [REDUCE_ONLY] CRV-USD: Limit Order reduce_only=False (will be 0 in API)
10:37:23 [DEBUG] Create Order Tx Info: {"AccountIndex":60113,"ApiKeyIndex":3,"MarketIndex":36,"ClientOrderIndex":1765705066854,"BaseAmount":2040,"Price":39064,"IsAsk":1,"Type":0,"TimeInForce":1,"ReduceOnly":0,"TriggerPrice":0,"OrderExpiry":1768124243471,"ExpiredAt":1765705642471,"Nonce":7713,"Sig":"vfG/WeNyJJIdMqVu+1uJVTIoB7bu/siCqwmrhaqXl1/UWm7xpTMRQGHXOsWEHV4fhH6ZupVyi3cRCZVafYpqx5f4ei3XryOlwQCqCJBlV3M="}
10:37:23 [DEBUG] Create Order Send Tx Response: code=200 message='{"ratelimit": "didn\'t use volume quota"}' tx_hash='7fc349437e8dc536626e75e47a220d083766198de3305ce032fe11aa432742ab7e60fd23e9cdafea' predicted_execution_time_ms=1765705028759 additional_properties={}
10:37:23 [INFO] âœ… Lighter Order Sent: 7fc349437e8dc536626e75e47a220d083766198de3305ce032fe11aa432742ab7e60fd23e9cdafea
10:37:23 [DEBUG] ğŸ“ Tracked order 7fc349437e8dc536626e... (client_oid=1765705066854)
10:37:23 [INFO] âœ… [PHASE 1] CRV-USD: Lighter order placed (0.59s)
10:37:23 [INFO]    Order ID: 7fc349437e8dc536626e75e47a220d083766198d...
10:37:23 [DEBUG] ğŸ“š CRV-USD Orderbook state: 20 bids, 20 asks, timestamp=1765705043.1378584
10:37:23 [DEBUG] âš ï¸ get_candlesticks CRV-USD error: 'LighterAdapter' object has no attribute '_get_market_id'
10:37:23 [DEBUG] ğŸ“Š CRV-USD: Insufficient candles for volatility (0/15)
10:37:23 [DEBUG] â±ï¸ CRV-USD: Dynamic timeout calculated: 22.5s (depth_ratio=5187.91, base=45.0s)
10:37:23 [INFO] â³ [PHASE 1.5] CRV-USD: Waiting for Lighter fill (max 22.5s, dynamic timeout)...
10:37:23 [DEBUG] Lighter: Loaded 117 prices via REST
10:37:23 [DEBUG] Lighter: Funding Refresh OK, cache=111
10:37:23 [INFO] ğŸ” Running periodic exchange sync check...
10:37:23 [DEBUG] ğŸ’“ [lighter] Alive (uptime=5s, last_msg=0s, last_server_ping=5s, server_pings_answered=0)
10:37:23 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=5s, last_msg=5s, last_pong=5s, pings=0, pongs=0)
10:37:23 [DEBUG] âœ… FARTCOIN-USD: X10=$524,354, Lighter=$10,153,840, Total=$10,678,194
10:37:23 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=5s, last_msg=0s, last_pong=5s, pings=0, pongs=0)
10:37:23 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=5s, last_msg=1s, last_pong=5s, pings=0, pongs=0)
10:37:24 [INFO] Lighter: Found 0 open positions
10:37:24 [DEBUG] [LIGHTER] ğŸ”„ Deduplicated: LIGHTER:fetch_open_positions (dedup window: 2.0s)
10:37:24 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:24 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:25 [INFO] âœ… CRV-USD: Expected profit $0.0700 in 24.0h (breakeven: 9.85h, APY: 54.3%)
10:37:25 [INFO] âœ… POPCAT-USD: Expected profit $0.0500 in 24.0h (breakeven: 11.43h, APY: 43.8%)
10:37:25 [INFO] âœ… Found 2 opportunities from 62 valid pairs
10:37:25 [INFO] ğŸ¯ Found 2 opportunities
10:37:25 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/balance
10:37:25 [INFO] ğŸ’° X10 verfÃ¼gbare Balance: $204.60 USDC
10:37:25 [DEBUG] âœ… PUMP-USD: X10=$517,133, Lighter=$1,598,283,695, Total=$1,598,800,828
10:37:26 [DEBUG] Lighter Balance: Raw=$249.10, Safe=$236.64
10:37:26 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:26 [INFO] ğŸ“Š Positions: X10=0, Lighter=0
10:37:26 [INFO] ğŸš€ Launching 1 trades
10:37:26 [INFO] ğŸš€ Launching POPCAT-USD (APY=43.8%)
10:37:26 [DEBUG] [X10] ğŸ”„ Deduplicated: X10:fetch_open_positions (dedup window: 2.0s)
10:37:26 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:26 [INFO] Lighter: Found 0 open positions
10:37:26 [DEBUG] âœ… Exposure Check: 0.39x <= 5.0x
10:37:26 [DEBUG] MIN_NOTIONAL POPCAT-USD: min_base=40.00000000 coins, price=$0.0973, min_qty_usd=$3.89, min_notional_api=$10.00, final=$11.00
10:37:26 [INFO] ğŸ“ SIZE POPCAT-USD: $80.00 (DESIRED_NOTIONAL_USD=$80.00)
10:37:26 [DEBUG] ğŸ” Liquidity Check: Skipping depth check for POPCAT-USD (Maker Order)
10:37:26 [INFO] ğŸš€ Opening POPCAT-USD: Size=$80.0
10:37:26 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:26 [INFO] ğŸš€ HEDGED TRADE START: POPCAT-USD
10:37:26 [INFO]    Lighter: SELL $80.00 @ $0.097340
10:37:26 [INFO]    X10:     BUY $80.00 @ $0.097364
10:37:26 [INFO]    Strategy: MAKER (Lighter first, then X10 hedge)
10:37:26 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:26 [INFO] âœ… Launched 1 trades this cycle
10:37:26 [DEBUG] Lighter REST GET /api/v1/orders returned 404 (no data - OK)
10:37:26 [DEBUG] ğŸ§¹ [PRE-TRADE] POPCAT-USD: No orders found via API, but attempting cancel_all_orders anyway (defensive cleanup)
10:37:26 [DEBUG] ğŸ§¹ [PRE-TRADE] POPCAT-USD: cancel_all_orders() executed (no orders found or already cancelled)
10:37:26 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/orders?
10:37:27 [DEBUG] Lighter REST GET /api/v1/orders returned 404 (no data - OK)
10:37:27 [INFO] âš–ï¸ Size Alignment POPCAT-USD: 80.00$ -> 79.92$ (821.000000 Coins) to match both exchanges (X10 Step: 1.0, Lighter Step: 0.0001)
10:37:27 [INFO] ğŸ“‹ [PHASE 0] POPCAT-USD:  Validating orderbook...
10:37:27 [DEBUG] ğŸ“š POPCAT-USD Lighter orderbook refreshed via REST
10:37:27 [DEBUG] ğŸ“š POPCAT-USD Orderbook state: 20 bids, 20 asks, timestamp=1765705047.396007
10:37:27 [DEBUG] âœ… POPCAT-USD Orderbook excellent for SELL Maker (profile=lighter): Orderbook healthy: 20 bids, $80729 depth, 0.06% spread
10:37:27 [INFO] âœ… [PHASE 0] POPCAT-USD: Orderbook validation PASSED (0.25s)
10:37:27 [INFO] ğŸ“¤ [PHASE 1] POPCAT-USD: Placing Lighter SELL order...
10:37:27 [INFO]    Size: $79.92 (821.000000 coins)
10:37:27 [INFO] ğŸš€ LIGHTER OPEN POPCAT-USD: side=SELL, size_usd=$79.92, amount=821.0, price=$0.097340, TIF=None
10:37:27 [DEBUG] ğŸ” DEBUG: POPCAT-USD market_id = 23 (raw=23, type=<class 'int'>)
10:37:27 [INFO] ğŸ›¡ï¸ Maker Price POPCAT-USD SELL: $0.097360 (Ask-1 Tick (Penny Jump - Priority Fill!) | Bid=$0.09731, Ask=$0.09737, Tick=1e-05)
10:37:27 [DEBUG] QUANTIZE POPCAT-USD: Notional=$79.91614 -> RawAmt=821.000000 -> QuantAmt=821.000000 (x0.0001) -> BaseInt=8210
10:37:27 [DEBUG] ğŸ“‹ [TIF] POPCAT-USD: Using TIF=1, expiry=-1 (not IOC)
10:37:27 [DEBUG] âš¡ Using nonce 7714 (pool: 18 remaining)
10:37:27 [INFO] ğŸ”’ Locked execution for POPCAT-USD SELL (Nonce: 7714)...
10:37:27 [DEBUG] âœ… [ORDER_TYPE] POPCAT-USD: Using ORDER_TYPE_LIMIT = 0
10:37:27 [DEBUG] â„¹ï¸ [ORDER_TYPE] POPCAT-USD: ORDER_TYPE_MARKET = 1 (available but not used for limit orders)
10:37:27 [DEBUG] âœ… [REDUCE_ONLY] POPCAT-USD: Limit Order reduce_only=False (will be 0 in API)
10:37:27 [DEBUG] Create Order Tx Info: {"AccountIndex":60113,"ApiKeyIndex":3,"MarketIndex":23,"ClientOrderIndex":1765705103788,"BaseAmount":8210,"Price":9736,"IsAsk":1,"Type":0,"TimeInForce":1,"ReduceOnly":0,"TriggerPrice":0,"OrderExpiry":1768124247489,"ExpiredAt":1765705646489,"Nonce":7714,"Sig":"sT6aruXGzEJg+RB61P/NyC3mpKkrIpa+BckfheIPfGyPFaoblptPRVd1Tsg90k7FYgRgAO8mZiFw2D7XMa3FExVZxZ89gGnRzWrVp4zCnlA="}
10:37:27 [DEBUG] Create Order Send Tx Response: code=200 message='{"ratelimit": "didn\'t use volume quota"}' tx_hash='f9e2f84f0346c356b0ae364865db273820c752b8588ff747519759d9cd2df4df155ce6d8912007e0' predicted_execution_time_ms=1765705032782 additional_properties={}
10:37:27 [INFO] âœ… Lighter Order Sent: f9e2f84f0346c356b0ae364865db273820c752b8588ff747519759d9cd2df4df155ce6d8912007e0
10:37:27 [DEBUG] ğŸ“ Tracked order f9e2f84f0346c356b0ae... (client_oid=1765705103788)
10:37:27 [INFO] âœ… [PHASE 1] POPCAT-USD: Lighter order placed (0.36s)
10:37:27 [INFO]    Order ID: f9e2f84f0346c356b0ae364865db273820c752b8...
10:37:27 [DEBUG] ğŸ“š POPCAT-USD Orderbook state: 20 bids, 20 asks, timestamp=1765705047.396007
10:37:27 [DEBUG] âš ï¸ get_candlesticks POPCAT-USD error: 'LighterAdapter' object has no attribute '_get_market_id'
10:37:27 [DEBUG] ğŸ“Š POPCAT-USD: Insufficient candles for volatility (0/15)
10:37:27 [DEBUG] â±ï¸ POPCAT-USD: Dynamic timeout calculated: 22.5s (depth_ratio=1110.44, base=45.0s)
10:37:27 [INFO] â³ [PHASE 1.5] POPCAT-USD: Waiting for Lighter fill (max 22.5s, dynamic timeout)...
10:37:28 [INFO] Lighter: Found 0 open positions
10:37:28 [DEBUG] ğŸ’“ [lighter] Alive (uptime=10s, last_msg=0s, last_server_ping=10s, server_pings_answered=0)
10:37:28 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=10s, last_msg=10s, last_pong=10s, pings=0, pongs=0)
10:37:28 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=10s, last_msg=1s, last_pong=10s, pings=0, pongs=0)
10:37:28 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=10s, last_msg=0s, last_pong=10s, pings=0, pongs=0)
10:37:29 [DEBUG] âœ… MON-USD: X10=$111,715, Lighter=$223,197,101, Total=$223,308,816
10:37:29 [DEBUG] [LIGHTER] ğŸ”„ Deduplicated: LIGHTER:fetch_open_positions (dedup window: 2.0s)
10:37:29 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:29 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:30 [INFO] âœ… CRV-USD: Expected profit $0.0700 in 24.0h (breakeven: 9.85h, APY: 54.3%)
10:37:30 [INFO] âœ… POPCAT-USD: Expected profit $0.0500 in 24.0h (breakeven: 11.43h, APY: 43.8%)
10:37:30 [INFO] âœ… Found 2 opportunities from 62 valid pairs
10:37:30 [INFO] ğŸ¯ Found 2 opportunities
10:37:30 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/balance
10:37:30 [INFO] ğŸ’° X10 verfÃ¼gbare Balance: $204.60 USDC
10:37:30 [INFO] Lighter: Found 1 open positions
10:37:30 [INFO] âœ… [PHASE 1.5] POPCAT-USD: Fill detected after 8 checks! (2.97s - FAST!)
10:37:30 [INFO] âœ… [PHASE 1.5] POPCAT-USD: Lighter FILLED (2.97s)
10:37:30 [INFO] ğŸ“Š [PHASE 2] POPCAT-USD: Using PLANNED size: 821.000000 coins (no partial fill detected)
10:37:30 [INFO] ğŸ“¤ [PHASE 2] POPCAT-USD: Placing X10 BUY hedge...
10:37:30 [INFO]    Size: 821.000000 coins (matching Lighter fill)
10:37:30 [INFO] ğŸš€ X10 EXECUTE POPCAT-USD BUY: 821.000000 Coins (Basis: COINS=821.0)
10:37:30 [DEBUG] â„¹ï¸ [TIF] POPCAT-USD: Available TimeInForce values: GTT=GTT, IOC=IOC, FOK=FOK
10:37:30 [DEBUG] âœ… [TIF] POPCAT-USD: Selected TimeInForce=GTT (post_only=False, reduce_only=False, is_market=False)
10:37:30 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/info/markets?
10:37:31 [DEBUG] Lighter Balance: Raw=$249.10, Safe=$236.64
10:37:31 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:31 [DEBUG] âœ… NEAR-USD: X10=$216,610, Lighter=$817,486, Total=$1,034,095
10:37:31 [DEBUG] Placing an order: id=3186304563329895152572391960490940092704978875931528075599337024217550423087
10:37:31 [DEBUG] Sending POST https://api.starknet.extended.exchange/api/v1/user/order, headers={<RequestHeader.ACCEPT: 'Accept'>: 'application/json', <RequestHeader.CONTENT_TYPE: 'Content-Type'>: 'application/json', <RequestHeader.USER_AGENT: 'User-Agent'>: 'X10PythonTradingClient/0.0.17', <RequestHeader.API_KEY: 'X-Api-Key'>: '***MASKED***'}
10:37:31 [INFO] ğŸ“Š Positions: X10=0, Lighter=1
10:37:32 [DEBUG] âœ… [ORDER_TYPE] POPCAT-USD: Limit Order placed (TimeInForce=GTT, post_only=False, reduce_only=False)
10:37:32 [INFO]  X10 Order: 2000138010305728512
10:37:32 [INFO] âœ… [PHASE 2] POPCAT-USD:  X10 hedge FILLED (1.62s)
10:37:32 [INFO]    Order ID: 2000138010305728512
10:37:32 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:32 [INFO] ğŸ“Š TRADE SUMMARY:  POPCAT-USD
10:37:32 [INFO]    Result: SUCCESS
10:37:32 [INFO]    Reason:  Hedged trade complete
10:37:32 [INFO]    Total Time: 5.20s
10:37:32 [INFO]    State: COMPLETE
10:37:32 [INFO]    Phase Times:
10:37:32 [INFO]       - orderbook_validation: 0.25s
10:37:32 [INFO]       - lighter_order_placement: 0.36s
10:37:32 [INFO]       - lighter_fill_wait: 2.97s
10:37:32 [INFO]       - x10_hedge: 1.62s
10:37:32 [INFO]    Lighter Order:  f9e2f84f0346c356b0ae364865db273820c752b8...
10:37:32 [INFO]    X10 Order: 2000138010305728512
10:37:32 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:32 [INFO] ğŸ“ Recording trade POPCAT-USD in database...
10:37:32 [DEBUG] ğŸ“ Trade added to state: POPCAT-USD
10:37:32 [INFO] âœ… Trade POPCAT-USD recorded successfully
10:37:32 [INFO]    X10 Order ID: 2000138010305728512
10:37:32 [INFO]    Lighter Order ID: f9e2f84f0346c356b0ae364865db27...
10:37:32 [INFO]    Size: $80.00
10:37:32 [INFO]    Entry X10: $0.097364
10:37:32 [INFO]    Entry Lighter: $0.097340
10:37:32 [INFO]    APY: 43.80%
10:37:32 [DEBUG] ğŸ“ Flushed 1 writes
10:37:32 [DEBUG] ğŸ“ Flushed 1 writes in 0.0ms
10:37:32 [DEBUG] ğŸ“¨ [x10_account] RAW: ORDER - {'type': 'ORDER', 'data': {'isSnapshot': False, 'orders': [{'id': 2000138010305728512, 'accountId': 127074, 'externalId': '3186304563329895152572391960490940092704978875931528075599337024217550423087'
10:37:32 [INFO] âœ… [x10_account] ORDER UPDATE: POPCAT-USD BUY FILLED qty=821 filled=821 @ $0.09795 (id=2000138010305728512)
10:37:32 [DEBUG] X10 Adapter: Order update processed - POPCAT-USD #2000138010305728512 FILLED
10:37:32 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': False, 'balance': {'collateralName': 'USD', 'balance': '204.604091', 'status': 'ACTIVE', 'equity': '204.604091', 'availableForTrade': '196.602325', 'availabl
10:37:32 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.604091, available=$196.602325, uPnL=$0.000000
10:37:32 [DEBUG] ğŸ“¨ [x10_account] RAW: TRADE - {'type': 'TRADE', 'data': {'isSnapshot': False, 'trades': [{'id': 2000138011144097792, 'accountId': 127074, 'market': 'POPCAT-USD', 'orderId': 2000138010305728512, 'externalOrderId': '3186304563329895
10:37:32 [INFO] ğŸ’°ğŸ’°ğŸ’° [x10_account] FILL/TRADE: POPCAT-USD BUY 821.0 @ $0.0974 (Trade: 2000138011144097792, Order: 2000138010305728512, Fee: $0.0180, Taker: True)
10:37:32 [DEBUG] [X10] Created entry price from TRADE for POPCAT-USD: $0.097390
10:37:32 [DEBUG] X10 Adapter: Fill update processed - POPCAT-USD order=2000138010305728512
10:37:32 [DEBUG] ğŸ“¨ [x10_account] RAW: POSITION - {
  "type": "POSITION",
  "data": {
    "isSnapshot": false,
    "positions": [
      {
        "id": 2000138011160870912,
        "accountId": 127074,
        "market": "POPCAT-USD",
        "status": "OPENED",
        "side": "LONG",
        "leverage": "10",
        "size": "821",
        "value": "80.017650",
        "openPrice": "0.09739",
        "markPrice": "0.097463643",
        "liquidationPrice": "0",
        "margin": "4.000882",
        "unrealisedPnl": "0.060460",
        "midPriceUnrealisedPnl": "0.004105",
        "realisedPnl": "-0.017990",
        "adl": 4,
        "createdAt": 1765705037286,
        "updatedAt": 1765705037286
      }
    ]
  },
  "ts": 1765705037286,
  "seq": 7
}
10:37:32 [DEBUG] ğŸ“Š [x10_account] POSITION FIELDS: {
  "id": 2000138011160870912,
  "accountId": 127074,
  "market": "POPCAT-USD",
  "status": "OPENED",
  "side": "LONG",
  "leverage": "10",
  "size": "821",
  "value": "80.017650",
  "openPrice": "0.09739",
  "markPrice": "0.097463643",
  "liquidationPrice": "0",
  "margin": "4.000882",
  "unrealisedPnl": "0.060460",
  "midPriceUnrealisedPnl": "0.004105",
  "realisedPnl": "-0.017990",
  "adl": 4,
  "createdAt": 1765705037286,
  "updatedAt": 1765705037286
}
10:37:32 [DEBUG] [X10] Using calculated entry price from TRADE fills for POPCAT-USD: $0.097390
10:37:32 [DEBUG] [X10] Updated POPCAT-USD in _positions_cache (size=821.0, entry=$0.097390)
10:37:32 [DEBUG] X10 Adapter: Position update processed - POPCAT-USD
10:37:32 [INFO] ğŸ“ˆ [x10_account] POSITION UPDATE: POPCAT-USD LONG size=821 entry=$0.09738999999999999 mark=$0.097463643 uPnL=$0.060460
10:37:32 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': False, 'balance': {'collateralName': 'USD', 'balance': '204.586101', 'status': 'ACTIVE', 'equity': '204.646561', 'availableForTrade': '196.644795', 'availabl
10:37:32 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.646561, available=$196.644795, uPnL=$0.060460
10:37:32 [INFO] Lighter: Found 1 open positions
10:37:32 [DEBUG] âœ… MNT-USD: X10=$105,342, Lighter=$3,153,743, Total=$3,259,085
10:37:33 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:33 [DEBUG] ğŸ“Œ POPCAT-USD: Stored entry snapshot for PnL ({'entry_qty_x10': 821.0, 'entry_price_x10': 0.09739, 'entry_qty_lighter': 821.0, 'entry_price_lighter': 0.09736, 'entry_fee_x10': 0.000225, 'entry_fee_lighter': 0.0})
10:37:33 [INFO] âœ… OPENED POPCAT-USD: $80.00
10:37:33 [DEBUG] ğŸ“ Flushed 1 writes
10:37:33 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=15s, last_msg=1s, last_pong=15s, pings=0, pongs=0)
10:37:33 [DEBUG] ğŸ’“ [lighter] Alive (uptime=15s, last_msg=0s, last_server_ping=15s, server_pings_answered=0)
10:37:33 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=15s, last_msg=0s, last_pong=15s, pings=0, pongs=0)
10:37:33 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=15s, last_msg=1s, last_pong=15s, pings=0, pongs=0)
10:37:34 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:34 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:34 [DEBUG] âœ… ASTER-USD: X10=$468,600, Lighter=$13,374,203, Total=$13,842,803
10:37:34 [INFO] âœ… CRV-USD: Expected profit $0.0700 in 24.0h (breakeven: 9.85h, APY: 54.3%)
10:37:34 [INFO] âœ… Found 1 opportunities from 61 valid pairs
10:37:34 [INFO] ğŸ¯ Found 1 opportunities
10:37:34 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/balance
10:37:34 [INFO] ğŸ’° X10 verfÃ¼gbare Balance: $196.64 USDC
10:37:35 [INFO] Lighter: Found 1 open positions
10:37:35 [DEBUG] [LIGHTER] ğŸ”„ Deduplicated: LIGHTER:fetch_open_positions (dedup window: 2.0s)
10:37:35 [DEBUG] Lighter Balance: Raw=$249.10, Safe=$236.64
10:37:36 [DEBUG] âœ… 1000PEPE-USD: X10=$248,939, Lighter=$225,390,023, Total=$225,638,962
10:37:37 [INFO] Lighter: Found 1 open positions
10:37:38 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:38 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:38 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=20s, last_msg=6s, last_pong=20s, pings=0, pongs=0)
10:37:38 [DEBUG] ğŸ’“ [lighter] Alive (uptime=20s, last_msg=0s, last_server_ping=20s, server_pings_answered=0)
10:37:38 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=20s, last_msg=0s, last_pong=20s, pings=0, pongs=0)
10:37:38 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=20s, last_msg=0s, last_pong=20s, pings=0, pongs=0)
10:37:39 [INFO] âœ… CRV-USD: Expected profit $0.0700 in 24.0h (breakeven: 9.85h, APY: 54.3%)
10:37:39 [INFO] âœ… Found 1 opportunities from 61 valid pairs
10:37:39 [INFO] ğŸ¯ Found 1 opportunities
10:37:39 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/balance
10:37:39 [INFO] ğŸ’° X10 verfÃ¼gbare Balance: $196.64 USDC
10:37:39 [INFO] Lighter: Found 1 open positions
10:37:40 [DEBUG] Lighter Balance: Raw=$249.09, Safe=$236.64
10:37:40 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:40 [DEBUG] âœ… EIGEN-USD: X10=$160,877, Lighter=$1,559,069, Total=$1,719,947
10:37:40 [INFO] ğŸ“Š Positions: X10=1, Lighter=1
10:37:40 [DEBUG] [LIGHTER] ğŸ”„ Deduplicated: LIGHTER:fetch_open_positions (dedup window: 2.0s)
10:37:41 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0082, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:41 [INFO] Lighter: Found 1 open positions
10:37:41 [DEBUG] âœ… ARB-USD: X10=$124,534, Lighter=$9,107,001, Total=$9,231,535
10:37:43 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:43 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:43 [INFO] âœ… CRV-USD: Expected profit $0.0700 in 24.0h (breakeven: 9.85h, APY: 54.3%)
10:37:43 [INFO] âœ… Found 1 opportunities from 61 valid pairs
10:37:43 [INFO] ğŸ¯ Found 1 opportunities
10:37:43 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/balance
10:37:43 [DEBUG] âœ… RESOLV-USD: X10=$145,054, Lighter=$47,134,363, Total=$47,279,417
10:37:43 [INFO] ğŸ’° X10 verfÃ¼gbare Balance: $196.64 USDC
10:37:43 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=25s, last_msg=11s, last_pong=25s, pings=0, pongs=0)
10:37:43 [DEBUG] ğŸ’“ [lighter] Alive (uptime=25s, last_msg=0s, last_server_ping=25s, server_pings_answered=0)
10:37:43 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=25s, last_msg=0s, last_pong=25s, pings=0, pongs=0)
10:37:43 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=25s, last_msg=2s, last_pong=25s, pings=0, pongs=0)
10:37:43 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0082, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:43 [DEBUG] ğŸ“Š CRV Lighter PnL: uPnL=$-0.0018, rPnL=$0.0000, entry=$0.390640, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:43 [INFO] Lighter: Found 2 open positions
10:37:44 [DEBUG] Lighter Balance: Raw=$249.09, Safe=$236.63
10:37:45 [DEBUG] âœ… WIF-USD: X10=$209,996, Lighter=$3,349,468, Total=$3,559,464
10:37:45 [DEBUG] [LIGHTER] ğŸ”„ Deduplicated: LIGHTER:fetch_open_positions (dedup window: 2.0s)
10:37:46 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0164, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:46 [DEBUG] ğŸ“Š CRV Lighter PnL: uPnL=$-0.0036, rPnL=$0.0000, entry=$0.390640, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:46 [INFO] Lighter: Found 2 open positions
10:37:46 [DEBUG] âš ï¸ CRV-USD Lighter orderbook stale (23.4s)
10:37:46 [DEBUG] ğŸ“š CRV-USD Lighter orderbook refreshed via REST
10:37:46 [DEBUG] ğŸ“š CRV-USD Orderbook state: 20 bids, 20 asks, timestamp=1765705066.7553575
10:37:46 [DEBUG] âœ… CRV-USD Orderbook excellent for SELL Maker (profile=lighter): Orderbook healthy: 20 bids, $293636 depth, 0.00% spread
10:37:46 [WARNING] â° [PHASE 1.5] CRV-USD: Fill timeout after 22.78s (orderbook: bid_depth=$293636.02, ask_depth=$441658.82, spread=0.256%)
10:37:46 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:47 [INFO] âœ… [RETRY] CRV-USD: Position already exists - order likely filled, skipping retry
10:37:47 [WARNING] â° [MAKER STRATEGY] CRV-USD: Wait timeout! Checking for fills before cancel...
10:37:47 [DEBUG] ğŸ“ [MIN_SIZE] CRV-USD: X10 min_trade_size = 1.0
10:37:47 [WARNING] âš ï¸ [MAKER STRATEGY] CRV-USD: PARTIAL FILL detected (45.400000 >= X10 min 1.000000) - will cancel remaining order and hedge this amount
10:37:47 [INFO] ğŸ“ Lighter: Found tracked order for hash 7fc349437e8dc536626e... (symbol=CRV-USD, client_oid=1765705066854)
10:37:47 [DEBUG] âš¡ Using nonce 7715 (pool: 17 remaining)
10:37:47 [DEBUG] Cancel All Orders Tx Info: {"AccountIndex":60113,"ApiKeyIndex":3,"TimeInForce":0,"Time":0,"ExpiredAt":1765705666019,"Nonce":7715,"Sig":"cJWNyNJrz9Omv4D20YHBwZLLYwO5m7H1xv1+X5DNGrxHglqfxRKQG+C4xYwBr5SN26p1zvjGh2VORFo8uMm4c9wEQosrRhZtiUFufaXmNxg="}
10:37:47 [DEBUG] âœ… LTC-USD: X10=$204,856, Lighter=$15,103, Total=$219,959
10:37:47 [DEBUG] Cancel All Orders Send Tx Response: code=200 message='{"ratelimit": "didn\'t use volume quota"}' tx_hash='e05bb973391f3a1c83154804a994bf68d4e28a1ea52cb7466f89161c2b46bbe8a6318267d3808ed5' predicted_execution_time_ms=1765705052108 additional_properties={}
10:37:47 [INFO] âœ… Cancelled via ImmediateCancelAll (tracked order fallback)
10:37:47 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:47 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:47 [DEBUG] ğŸ’“ [x10_account] Sent keepalive ping #1: 1765705067907
10:37:47 [DEBUG] ğŸ’“ [x10_account] Health OK - last activity 15s ago
10:37:47 [DEBUG] ğŸ’“ [x10_account] Health OK - msgs=8 (ORDER:2, TRADE:1, POSITION:2, BALANCE:3)
10:37:47 [INFO] âœ… CRV-USD: Expected profit $0.0700 in 24.0h (breakeven: 9.85h, APY: 54.3%)
10:37:47 [INFO] âœ… Found 1 opportunities from 61 valid pairs
10:37:47 [INFO] ğŸ¯ Found 1 opportunities
10:37:47 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/balance
10:37:48 [INFO] ğŸ’° X10 verfÃ¼gbare Balance: $196.64 USDC
10:37:48 [DEBUG] Lighter REST GET /api/v1/orders returned 404 (no data - OK)
10:37:48 [DEBUG] [LIGHTER] Generated auth token for accountInactiveOrders
10:37:48 [DEBUG] Lighter fetch_my_trades(CRV-USD): Found 5 filled orders
10:37:48 [INFO] âœ“ 404 Double-Check: No fills found in history. Confirmed Cancelled.
10:37:48 [INFO] ğŸ” [MAKER STRATEGY] CRV-USD: Checking for Ghost Fills (FAST CHECK)...
10:37:48 [DEBUG] Lighter Balance: Raw=$249.02, Safe=$236.57
10:37:48 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:48 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=30s, last_msg=16s, last_pong=30s, pings=1, pongs=0)
10:37:48 [DEBUG] ğŸ’“ [lighter] Alive (uptime=30s, last_msg=0s, last_server_ping=30s, server_pings_answered=0)
10:37:48 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=30s, last_msg=3s, last_pong=30s, pings=0, pongs=0)
10:37:48 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=30s, last_msg=0s, last_pong=30s, pings=0, pongs=0)
10:37:49 [DEBUG] ğŸ• Watchdog OK: Daten-Alter 1.5s
10:37:49 [DEBUG] ğŸ“Š Task health: 7 alive, 0 dead
10:37:49 [INFO] ğŸ“Š Positions: X10=1, Lighter=2
10:37:49 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0739, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:49 [DEBUG] ğŸ“Š CRV Lighter PnL: uPnL=$-0.0027, rPnL=$0.0000, entry=$0.390640, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:49 [INFO] Lighter: Found 2 open positions
10:37:49 [WARNING] âš ï¸ [MAKER STRATEGY] CRV-USD: GHOST FILL DETECTED on attempt 1! Size=-45.4. HEDGING NOW!
10:37:49 [INFO] ğŸ§¹ [GHOST FILL] CRV-USD: Attempting to cancel remaining order parts after partial fill (size=-45.4)
10:37:49 [INFO] âœ… [MAKER STRATEGY] CRV-USD: Lighter Filled! Executing X10 Hedge...
10:37:49 [INFO] âœ… [PHASE 1.5] CRV-USD: Lighter FILLED (22.78s)
10:37:49 [INFO] ğŸ“Š [PHASE 2] CRV-USD: Using ACTUAL filled size: 45.400000 coins (from Ghost Fill/Partial Fill detection)
10:37:49 [INFO] ğŸ“¤ [PHASE 2] CRV-USD: Placing X10 BUY hedge...
10:37:49 [INFO]    Size: 45.400000 coins (matching Lighter fill)
10:37:49 [INFO] ğŸš€ X10 EXECUTE CRV-USD BUY: 45.400000 Coins (Basis: COINS=45.4)
10:37:49 [DEBUG] â„¹ï¸ [TIF] CRV-USD: Available TimeInForce values: GTT=GTT, IOC=IOC, FOK=FOK
10:37:49 [DEBUG] âœ… [TIF] CRV-USD: Selected TimeInForce=GTT (post_only=False, reduce_only=False, is_market=False)
10:37:49 [DEBUG] Placing an order: id=3396456188964526979879932886976450621539418869410929653462094291158901413852
10:37:49 [DEBUG] Sending POST https://api.starknet.extended.exchange/api/v1/user/order, headers={<RequestHeader.ACCEPT: 'Accept'>: 'application/json', <RequestHeader.CONTENT_TYPE: 'Content-Type'>: 'application/json', <RequestHeader.USER_AGENT: 'User-Agent'>: 'X10PythonTradingClient/0.0.17', <RequestHeader.API_KEY: 'X-Api-Key'>: '***MASKED***'}
10:37:50 [DEBUG] âœ… [ORDER_TYPE] CRV-USD: Limit Order placed (TimeInForce=GTT, post_only=False, reduce_only=False)
10:37:50 [INFO]  X10 Order: 2000138085962706944
10:37:50 [INFO] âœ… [PHASE 2] CRV-USD:  X10 hedge FILLED (1.06s)
10:37:50 [INFO]    Order ID: 2000138085962706944
10:37:50 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:50 [INFO] ğŸ“Š TRADE SUMMARY:  CRV-USD
10:37:50 [INFO]    Result: SUCCESS
10:37:50 [INFO]    Reason:  Hedged trade complete
10:37:50 [INFO]    Total Time: 28.34s
10:37:50 [INFO]    State: COMPLETE
10:37:50 [INFO]    Phase Times:
10:37:50 [INFO]       - orderbook_validation: 1.08s
10:37:50 [INFO]       - lighter_order_placement: 0.59s
10:37:50 [INFO]       - lighter_fill_wait: 22.78s
10:37:50 [INFO]       - x10_hedge: 1.06s
10:37:50 [INFO]    Lighter Order:  7fc349437e8dc536626e75e47a220d083766198d...
10:37:50 [INFO]    X10 Order: 2000138085962706944
10:37:50 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10:37:50 [INFO] ğŸ“ Recording trade CRV-USD in database...
10:37:50 [DEBUG] ğŸ“ Trade added to state: CRV-USD
10:37:50 [INFO] âœ… Trade CRV-USD recorded successfully
10:37:50 [INFO]    X10 Order ID: 2000138085962706944
10:37:50 [INFO]    Lighter Order ID: 7fc349437e8dc536626e75e47a220d...
10:37:50 [INFO]    Size: $80.00
10:37:50 [INFO]    Entry X10: $0.390555
10:37:50 [INFO]    Entry Lighter: $0.390680
10:37:50 [INFO]    APY: 54.31%
10:37:50 [DEBUG] ğŸ“ Flushed 1 writes
10:37:50 [DEBUG] ğŸ“ Flushed 1 writes in 15.0ms
10:37:50 [DEBUG] ğŸ“¨ [x10_account] RAW: ORDER - {'type': 'ORDER', 'data': {'isSnapshot': False, 'orders': [{'id': 2000138085962706944, 'accountId': 127074, 'externalId': '3396456188964526979879932886976450621539418869410929653462094291158901413852'
10:37:50 [INFO] âœ… [x10_account] ORDER UPDATE: CRV-USD BUY FILLED qty=45 filled=45 @ $0.39290 (id=2000138085962706944)
10:37:50 [DEBUG] X10 Adapter: Order update processed - CRV-USD #2000138085962706944 FILLED
10:37:50 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': False, 'balance': {'collateralName': 'USD', 'balance': '204.586101', 'status': 'ACTIVE', 'equity': '204.646561', 'availableForTrade': '194.887298', 'availabl
10:37:50 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.646561, available=$194.887298, uPnL=$0.060460
10:37:50 [DEBUG] ğŸ“¨ [x10_account] RAW: TRADE - {'type': 'TRADE', 'data': {'isSnapshot': False, 'trades': [{'id': 2000138086800953344, 'accountId': 127074, 'market': 'CRV-USD', 'orderId': 2000138085962706944, 'externalOrderId': '3396456188964526979
10:37:50 [INFO] ğŸ’°ğŸ’°ğŸ’° [x10_account] FILL/TRADE: CRV-USD BUY 45.0 @ $0.3906 (Trade: 2000138086800953344, Order: 2000138085962706944, Fee: $0.0040, Taker: True)
10:37:50 [DEBUG] [X10] Created entry price from TRADE for CRV-USD: $0.390600
10:37:50 [DEBUG] X10 Adapter: Fill update processed - CRV-USD order=2000138085962706944
10:37:50 [DEBUG] ğŸ“¨ [x10_account] RAW: POSITION - {
  "type": "POSITION",
  "data": {
    "isSnapshot": false,
    "positions": [
      {
        "id": 2000138086817726464,
        "accountId": 127074,
        "market": "CRV-USD",
        "status": "OPENED",
        "side": "LONG",
        "leverage": "10",
        "size": "45",
        "value": "17.574960",
        "openPrice": "0.39060",
        "markPrice": "0.39055467",
        "liquidationPrice": "0",
        "margin": "0.351499",
        "unrealisedPnl": "-0.002040",
        "midPriceUnrealisedPnl": "-0.006525",
        "realisedPnl": "-0.003954",
        "adl": 3,
        "createdAt": 1765705055325,
        "updatedAt": 1765705055325
      }
    ]
  },
  "ts": 1765705055325,
  "seq": 12
}
10:37:50 [DEBUG] ğŸ“Š [x10_account] POSITION FIELDS: {
  "id": 2000138086817726464,
  "accountId": 127074,
  "market": "CRV-USD",
  "status": "OPENED",
  "side": "LONG",
  "leverage": "10",
  "size": "45",
  "value": "17.574960",
  "openPrice": "0.39060",
  "markPrice": "0.39055467",
  "liquidationPrice": "0",
  "margin": "0.351499",
  "unrealisedPnl": "-0.002040",
  "midPriceUnrealisedPnl": "-0.006525",
  "realisedPnl": "-0.003954",
  "adl": 3,
  "createdAt": 1765705055325,
  "updatedAt": 1765705055325
}
10:37:50 [DEBUG] [X10] Using calculated entry price from TRADE fills for CRV-USD: $0.390600
10:37:50 [DEBUG] [X10] Updated CRV-USD in _positions_cache (size=45.0, entry=$0.390600)
10:37:50 [DEBUG] X10 Adapter: Position update processed - CRV-USD
10:37:50 [INFO] ğŸ“‰ [x10_account] POSITION UPDATE: CRV-USD LONG size=45 entry=$0.39060000000000006 mark=$0.39055467 uPnL=$-0.002040
10:37:50 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': False, 'balance': {'collateralName': 'USD', 'balance': '204.582147', 'status': 'ACTIVE', 'equity': '204.640567', 'availableForTrade': '194.881304', 'availabl
10:37:50 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.640567, available=$194.881304, uPnL=$0.058420
10:37:50 [DEBUG] âœ… GRASS-USD: X10=$79,984, Lighter=$1,820,211, Total=$1,900,195
10:37:51 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:51 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0739, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:51 [DEBUG] ğŸ“Š CRV Lighter PnL: uPnL=$-0.0027, rPnL=$0.0000, entry=$0.390640, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:51 [INFO] Lighter: Found 2 open positions
10:37:51 [DEBUG] ğŸ“Œ CRV-USD: Stored entry snapshot for PnL ({'entry_qty_x10': 45.0, 'entry_price_x10': 0.3906, 'entry_qty_lighter': 45.4, 'entry_price_lighter': 0.39064, 'entry_fee_x10': 0.000225, 'entry_fee_lighter': 0.0})
10:37:51 [INFO] âœ… OPENED CRV-USD: $80.00
10:37:51 [DEBUG] ğŸ“ Flushed 1 writes
10:37:52 [INFO] ğŸ” RECONCILE: Starting strict sync check...
10:37:52 [DEBUG] [LIGHTER] ğŸ”„ Deduplicated: LIGHTER:fetch_open_positions (dedup window: 2.0s)
10:37:52 [DEBUG] [X10] ğŸ”„ Deduplicated: X10:fetch_open_positions (dedup window: 2.0s)
10:37:52 [INFO] âœ… RECONCILE: Sync complete.
10:37:52 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:52 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:52 [INFO] âœ… Found 0 opportunities from 60 valid pairs
10:37:52 [DEBUG] âœ… AVAX-USD: X10=$400,491, Lighter=$339,011, Total=$739,502
10:37:53 [DEBUG] ğŸ’“ [lighter] Alive (uptime=35s, last_msg=0s, last_server_ping=35s, server_pings_answered=0)
10:37:53 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=35s, last_msg=3s, last_pong=35s, pings=1, pongs=0)
10:37:53 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=35s, last_msg=0s, last_pong=35s, pings=0, pongs=0)
10:37:53 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=35s, last_msg=0s, last_pong=35s, pings=0, pongs=0)
10:37:54 [DEBUG] âœ… WLD-USD: X10=$63,554, Lighter=$1,950,168, Total=$2,013,723
10:37:55 [INFO] ğŸ” RECONCILE: Starting strict sync check...
10:37:55 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:55 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0493, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:55 [DEBUG] ğŸ“Š CRV Lighter PnL: uPnL=$-0.0027, rPnL=$0.0000, entry=$0.390640, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:55 [INFO] Lighter: Found 2 open positions
10:37:55 [INFO] âœ… RECONCILE: Sync complete.
10:37:55 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:55 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:37:56 [DEBUG] âœ… STRK-USD: X10=$400,182, Lighter=$7,239,777, Total=$7,639,959
10:37:56 [INFO] âœ… Found 0 opportunities from 60 valid pairs
10:37:57 [DEBUG] âœ… TRX-USD: X10=$212,463, Lighter=$5,698,594, Total=$5,911,057
10:37:58 [DEBUG] ğŸ’“ [lighter] Alive (uptime=40s, last_msg=0s, last_server_ping=40s, server_pings_answered=0)
10:37:58 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=40s, last_msg=8s, last_pong=40s, pings=1, pongs=0)
10:37:58 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=40s, last_msg=1s, last_pong=40s, pings=0, pongs=0)
10:37:58 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=40s, last_msg=0s, last_pong=40s, pings=0, pongs=0)
10:37:59 [INFO] ğŸ” RECONCILE: Starting strict sync check...
10:37:59 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:37:59 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0411, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:59 [DEBUG] ğŸ“Š CRV Lighter PnL: uPnL=$-0.0027, rPnL=$0.0000, entry=$0.390640, funding_paid_out=$0.0000, funding_received=$-0.0000
10:37:59 [INFO] Lighter: Found 2 open positions
10:37:59 [INFO] âœ… RECONCILE: Sync complete.
10:37:59 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:37:59 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:38:00 [INFO] âœ… Found 0 opportunities from 60 valid pairs
10:38:01 [DEBUG] âœ… BTC-USD: X10=$30,876,356, Lighter=$3,053, Total=$30,879,409
10:38:03 [INFO] ğŸ” RECONCILE: Starting strict sync check...
10:38:03 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:38:03 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0493, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:38:03 [DEBUG] ğŸ“Š CRV Lighter PnL: uPnL=$-0.0023, rPnL=$0.0000, entry=$0.390640, funding_paid_out=$0.0000, funding_received=$-0.0000
10:38:03 [INFO] Lighter: Found 2 open positions
10:38:03 [INFO] âœ… RECONCILE: Sync complete.
10:38:03 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:38:03 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:38:03 [DEBUG] âœ… SOL-USD: X10=$4,821,492, Lighter=$365,842, Total=$5,187,335
10:38:03 [INFO] âœ… Found 0 opportunities from 60 valid pairs
10:38:03 [DEBUG] ğŸ’“ [lighter] Alive (uptime=45s, last_msg=0s, last_server_ping=45s, server_pings_answered=0)
10:38:03 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=45s, last_msg=13s, last_pong=45s, pings=1, pongs=0)
10:38:03 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=45s, last_msg=6s, last_pong=45s, pings=0, pongs=0)
10:38:03 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=45s, last_msg=0s, last_pong=45s, pings=0, pongs=0)
10:38:05 [DEBUG] âœ… ADA-USD: X10=$278,330, Lighter=$3,613,920, Total=$3,892,249
10:38:06 [INFO] ğŸ” RECONCILE: Starting strict sync check...
10:38:06 [DEBUG] Sending GET https://api.starknet.extended.exchange/api/v1/user/positions?
10:38:06 [DEBUG] âœ… SPX-USD: X10=$70,810, Lighter=$3,459,978, Total=$3,530,788
10:38:07 [DEBUG] ğŸ“Š POPCAT Lighter PnL: uPnL=$-0.0657, rPnL=$0.0000, entry=$0.097360, funding_paid_out=$0.0000, funding_received=$-0.0000
10:38:07 [DEBUG] ğŸ“Š CRV Lighter PnL: uPnL=$-0.0027, rPnL=$0.0000, entry=$0.390640, funding_paid_out=$0.0000, funding_received=$-0.0000
10:38:07 [INFO] Lighter: Found 2 open positions
10:38:07 [INFO] âœ… RECONCILE: Sync complete.
10:38:07 [DEBUG] Price cache status: X10=81/64, Lighter=117/64
10:38:07 [DEBUG] ğŸ” Scanning 64 pairs. Lighter markets: 115, X10 markets: 91
10:38:07 [INFO] âœ… Found 0 opportunities from 60 valid pairs
10:38:08 [DEBUG] âœ… AERO-USD: X10=$239,156, Lighter=$2,349,228, Total=$2,588,384
10:38:08 [INFO] ğŸ›‘ Initiating shutdown...
10:38:08 [INFO] âœ… ParallelExecutionManager: No active executions
10:38:08 [DEBUG] Cancelled task: maintenance_loop
10:38:08 [DEBUG] Cancelled task: cleanup_finished_tasks
10:38:08 [DEBUG] Cancelled task: health_reporter
10:38:08 [DEBUG] Cancelled task: farm_loop
10:38:08 [DEBUG] Cancelled task: logic_loop
10:38:08 [DEBUG] Cancelled task: trade_management_loop
10:38:08 [DEBUG] Cancelled task: connection_watchdog
10:38:08 [INFO] Farm loop cancelled
10:38:08 [INFO] Logic loop cancelled
10:38:08 [INFO] Connection watchdog cancelled
10:38:08 [INFO] ğŸ›‘ Shutdown orchestrator start (reason=bot_event_loop)
10:38:08 [INFO] ğŸ›‘ [X10] Rate limiter shutdown - cancelled 0 waiters
10:38:08 [INFO] ğŸ›‘ [LIGHTER] Rate limiter shutdown - cancelled 0 waiters
10:38:08 [INFO] ğŸ›‘ All rate limiters shutdown: {'X10': {'waiters_cancelled': 0, 'shutdown': True}, 'LIGHTER': {'waiters_cancelled': 0, 'shutdown': True}}
10:38:08 [INFO] ğŸ›‘ Rate limiters shutdown: {'X10': {'waiters_cancelled': 0, 'shutdown': True}, 'LIGHTER': {'waiters_cancelled': 0, 'shutdown': True}}
10:38:08 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:08 [DEBUG] [X10] Shutdown active - returning cached positions
10:38:08 [INFO] ğŸ“¸ Position snapshot: X10=2, Lighter=2
10:38:08 [INFO] âœ… No active executions to wait for
10:38:08 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:08 [DEBUG] [X10] Shutdown active - returning cached positions
10:38:08 [INFO] âš¡ Attempting global Lighter cancel...
10:38:08 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:08 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=50s, last_msg=18s, last_pong=50s, pings=1, pongs=0)
10:38:08 [DEBUG] ğŸ’“ [lighter] Alive (uptime=50s, last_msg=0s, last_server_ping=50s, server_pings_answered=0)
10:38:08 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=50s, last_msg=3s, last_pong=50s, pings=0, pongs=0)
10:38:08 [DEBUG] ğŸ’“ [x10_funding] Alive (uptime=50s, last_msg=1s, last_pong=50s, pings=0, pongs=0)
10:38:08 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=50s, last_msg=0s, last_pong=50s, pings=0, pongs=0)
10:38:09 [INFO] âš¡ Executing ImmediateCancelAll (nonce=7716)...
10:38:09 [DEBUG] Cancel All Orders Tx Info: {"AccountIndex":60113,"ApiKeyIndex":3,"TimeInForce":0,"Time":0,"ExpiredAt":1765705688823,"Nonce":7716,"Sig":"YzwAqOw0pFNz0zvlDYI6BRc0w67RktqSSo/kvj9t7PAF3WG3HbjEZ5VtBMfzvYwgL8bl2fp6WSqQfsWPWI+o0nqvnkqA+qamNH/TgxxgUgg="}
10:38:10 [DEBUG] Cancel All Orders Send Tx Response: code=200 message='{"ratelimit": "didn\'t use volume quota"}' tx_hash='fdd55c24a5b26f98fb6415250d216de29dab10b6dd0848f051e146455a54126b0827af00a6843fbd' predicted_execution_time_ms=1765705074910 additional_properties={}
10:38:10 [INFO] âœ… Lighter: ImmediateCancelAll executed (tx={"AccountIndex":60113,"ApiKeyIndex":3,"TimeInForce":0,"Time":0,"ExpiredAt":1765705688823,"Nonce":7716,"Sig":"YzwAqOw0pFNz0zvlDYI6BRc0w67RktqSSo/kvj9t7PAF3WG3HbjEZ5VtBMfzvYwgL8bl2fp6WSqQfsWPWI+o0nqvnkqA+qamNH/TgxxgUgg="})
10:38:10 [DEBUG] ğŸ”„ Nonce cache invalidated
10:38:10 [INFO] ğŸ›‘ Cancelling open orders for 2 symbols (LighterGlobal=True)...
10:38:10 [DEBUG] [X10] Shutdown active - skipping cancel_all_orders for CRV-USD
10:38:10 [DEBUG] [X10] Shutdown active - skipping cancel_all_orders for POPCAT-USD
10:38:10 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:10 [DEBUG] [X10] Shutdown active - returning cached positions
10:38:10 [INFO] ğŸ”» Close attempt 1/3 | x10=2, lighter=2
10:38:10 [INFO] ğŸ›‘ Closing X10 POPCAT-USD (SELL 821.0)
10:38:10 [INFO] ğŸ›‘ Closing X10 CRV-USD (SELL 45.0)
10:38:10 [INFO] ğŸ“Š POPCAT-USD Pre-Close PnL: uPnL=$-0.0657, rPnL=$0.0000, funding=$-0.0000, entry=$0.097360
10:38:10 [INFO] ğŸ›‘ Closing Lighter POPCAT-USD: BUY 821.0 (IOC reduce_only, price=0.09734)
10:38:10 [INFO] ğŸ“Š CRV-USD Pre-Close PnL: uPnL=$-0.0027, rPnL=$0.0000, funding=$-0.0000, entry=$0.390640
10:38:10 [INFO] ğŸ›‘ Closing Lighter CRV-USD: BUY 45.4 (IOC reduce_only, price=0.39068)
10:38:10 [DEBUG] [X10] Shutdown active - skipping cancel_all_orders for POPCAT-USD
10:38:10 [DEBUG] [X10] Shutdown active - skipping cancel_all_orders for CRV-USD
10:38:10 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] close_live_position: symbol=POPCAT-USD, side=SELL, notional=$79.91614
10:38:10 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:10 [INFO] âœ… Lighter: ImmediateCancelAll already executed (deduplicated)
10:38:10 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] close_live_position: symbol=CRV-USD, side=SELL, notional=$17.736872
10:38:10 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:10 [INFO] âœ… Lighter: ImmediateCancelAll already executed (deduplicated)
10:38:10 [DEBUG] [X10] Shutdown active - returning cached positions
10:38:10 [INFO] ğŸ”» X10 CLOSE POPCAT-USD: size=821.000000, side=SELL
10:38:10 [DEBUG] [X10] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] [X10] Rate limiter cancelled during open_live_position (reduce_only=True) - continuing for position close
10:38:10 [DEBUG] âœ… [ORDER_TYPE] POPCAT-USD: Using TimeInForce.IOC for Market Order (reduce_only)
10:38:10 [DEBUG] â„¹ï¸ [TIF] POPCAT-USD: Available TimeInForce values: GTT=GTT, IOC=IOC, FOK=FOK
10:38:10 [DEBUG] âœ… [TIF] POPCAT-USD: Selected TimeInForce=IOC (post_only=False, reduce_only=True, is_market=True)
10:38:10 [DEBUG] [X10] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] [X10] Rate limiter cancelled during place_order (reduce_only=True) - continuing for position close
10:38:10 [DEBUG] Placing an order: id=607590140551568730799872020240480496474279639984065458976169296198983559204
10:38:10 [DEBUG] Sending POST https://api.starknet.extended.exchange/api/v1/user/order, headers={<RequestHeader.ACCEPT: 'Accept'>: 'application/json', <RequestHeader.CONTENT_TYPE: 'Content-Type'>: 'application/json', <RequestHeader.USER_AGENT: 'User-Agent'>: 'X10PythonTradingClient/0.0.17', <RequestHeader.API_KEY: 'X-Api-Key'>: '***MASKED***'}
10:38:10 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:10 [DEBUG] MIN_NOTIONAL CRV-USD: min_base=20.00000000 coins, price=$0.3907, min_qty_usd=$7.81, min_notional_api=$10.00, final=$11.00
10:38:10 [INFO] ğŸ”» LIGHTER CLOSE CRV-USD: size=-45.400000 coins, side=BUY, price=$0.3907, notional=$17.74, dust=False
10:38:10 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] âš¡ Skipping validation for reduce_only order CRV-USD ($17.74)
10:38:10 [INFO] ğŸš€ LIGHTER OPEN CRV-USD: side=BUY, size_usd=$17.74, amount=45.4, price=$0.390680, TIF=IOC
10:38:10 [DEBUG] ğŸ” DEBUG: CRV-USD market_id = 36 (raw=36, type=<class 'int'>)
10:38:10 [DEBUG] ğŸ”„ CRV-USD: Shutdown detected - using passed price as mark (mark=$0.390680)
10:38:10 [DEBUG] QUANTIZE CRV-USD: Notional=$17.736872 -> RawAmt=45.400000 -> QuantAmt=45.400000 (x0.0001) -> BaseInt=454
10:38:10 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] ğŸ” [TIF] CRV-USD: Processing time_in_force='IOC' (raw='IOC')
10:38:10 [DEBUG] âœ… [TIF] CRV-USD: Set IOC via ORDER_TIME_IN_FORCE_IMMEDIATE_OR_CANCEL = 0
10:38:10 [DEBUG] ğŸ”§ [TIF] CRV-USD: Set expiry=0 for IOC order
10:38:10 [INFO] âš¡ [TIF] CRV-USD: Using IOC order (tif=0, expiry=0, ioc_attr=0)
10:38:10 [DEBUG] [X10] Shutdown active - returning cached positions
10:38:10 [INFO] ğŸ”» X10 CLOSE CRV-USD: size=45.000000, side=SELL
10:38:10 [DEBUG] [X10] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] [X10] Rate limiter cancelled during open_live_position (reduce_only=True) - continuing for position close
10:38:10 [DEBUG] âœ… [ORDER_TYPE] CRV-USD: Using TimeInForce.IOC for Market Order (reduce_only)
10:38:10 [DEBUG] â„¹ï¸ [TIF] CRV-USD: Available TimeInForce values: GTT=GTT, IOC=IOC, FOK=FOK
10:38:10 [DEBUG] âœ… [TIF] CRV-USD: Selected TimeInForce=IOC (post_only=False, reduce_only=True, is_market=True)
10:38:10 [DEBUG] [X10] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] [X10] Rate limiter cancelled during place_order (reduce_only=True) - continuing for position close
10:38:10 [DEBUG] Placing an order: id=1052229458401642992291124083535498457760978432435668697976308849507052568635
10:38:10 [DEBUG] Sending POST https://api.starknet.extended.exchange/api/v1/user/order, headers={<RequestHeader.ACCEPT: 'Accept'>: 'application/json', <RequestHeader.CONTENT_TYPE: 'Content-Type'>: 'application/json', <RequestHeader.USER_AGENT: 'User-Agent'>: 'X10PythonTradingClient/0.0.17', <RequestHeader.API_KEY: 'X-Api-Key'>: '***MASKED***'}
10:38:10 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:10 [DEBUG] MIN_NOTIONAL POPCAT-USD: min_base=40.00000000 coins, price=$0.0973, min_qty_usd=$3.89, min_notional_api=$10.00, final=$11.00
10:38:10 [INFO] ğŸ”» LIGHTER CLOSE POPCAT-USD: size=-821.000000 coins, side=BUY, price=$0.0973, notional=$79.92, dust=False
10:38:10 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] âš¡ Skipping validation for reduce_only order POPCAT-USD ($79.92)
10:38:10 [INFO] ğŸš€ LIGHTER OPEN POPCAT-USD: side=BUY, size_usd=$79.92, amount=821.0, price=$0.097340, TIF=IOC
10:38:10 [DEBUG] ğŸ” DEBUG: POPCAT-USD market_id = 23 (raw=23, type=<class 'int'>)
10:38:10 [DEBUG] ğŸ”„ POPCAT-USD: Shutdown detected - using passed price as mark (mark=$0.097340)
10:38:10 [DEBUG] QUANTIZE POPCAT-USD: Notional=$79.91614 -> RawAmt=821.000000 -> QuantAmt=821.000000 (x0.0001) -> BaseInt=8210
10:38:10 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:10 [DEBUG] ğŸ” [TIF] POPCAT-USD: Processing time_in_force='IOC' (raw='IOC')
10:38:10 [DEBUG] âœ… [TIF] POPCAT-USD: Set IOC via ORDER_TIME_IN_FORCE_IMMEDIATE_OR_CANCEL = 0
10:38:10 [DEBUG] ğŸ”§ [TIF] POPCAT-USD: Set expiry=0 for IOC order
10:38:10 [INFO] âš¡ [TIF] POPCAT-USD: Using IOC order (tif=0, expiry=0, ioc_attr=0)
10:38:10 [DEBUG] ğŸ”„ Nonce pool refilled: 20 nonces starting at 7717
10:38:10 [DEBUG] âš¡ Using nonce 7717 (pool: 19 remaining)
10:38:10 [INFO] ğŸ”’ Locked execution for CRV-USD BUY (Nonce: 7717)...
10:38:10 [INFO] âš¡ MARKET ORDER CRV-USD: BUY 454 @ avg_price=41245 (shutdown fast-close)
10:38:10 [DEBUG] âœ… [REDUCE_ONLY] CRV-USD: Market Order reduce_only=True (will be 1 in API)
10:38:10 [DEBUG] Create Order Tx Info: {"AccountIndex":60113,"ApiKeyIndex":3,"MarketIndex":36,"ClientOrderIndex":1765705157016,"BaseAmount":454,"Price":41245,"IsAsk":0,"Type":1,"TimeInForce":0,"ReduceOnly":1,"TriggerPrice":0,"OrderExpiry":0,"ExpiredAt":1765705689855,"Nonce":7717,"Sig":"F39958fTJyB8KWdDJd67bjhgg+1I2DMMf/3JS/u7bkvnWUBGBrc+JMSGdFIq+S2Q5quGWJPQIMhWcQpk5gRuORb9NdBWohtXAli6sXs49kw="}
10:38:11 [DEBUG] Create Order Send Tx Response: code=200 message='{"ratelimit": "didn\'t use volume quota"}' tx_hash='530b117a9e03e1230c879d789e6bcf61c66346b1a812550618d5fd4c2b0c3ceeb67804f7187b20ec' predicted_execution_time_ms=1765705076154 additional_properties={}
10:38:11 [INFO] âœ… Lighter Order Sent: 530b117a9e03e1230c879d789e6bcf61c66346b1a812550618d5fd4c2b0c3ceeb67804f7187b20ec
10:38:11 [DEBUG] ğŸ“ Tracked order 530b117a9e03e1230c87... (client_oid=1765705157016)
10:38:11 [INFO] âœ… Lighter close CRV-USD: Erfolgreich ($17.74)
10:38:11 [DEBUG] [LIGHTER] Removed CRV-USD from _positions_cache after successful close
10:38:11 [INFO] âœ… Lighter CRV-USD closed and tracked
10:38:11 [DEBUG] âš¡ Using nonce 7718 (pool: 18 remaining)
10:38:11 [INFO] ğŸ”’ Locked execution for POPCAT-USD BUY (Nonce: 7718)...
10:38:11 [INFO] âš¡ MARKET ORDER POPCAT-USD: BUY 8210 @ avg_price=10276 (shutdown fast-close)
10:38:11 [DEBUG] âœ… [REDUCE_ONLY] POPCAT-USD: Market Order reduce_only=True (will be 1 in API)
10:38:11 [DEBUG] Create Order Tx Info: {"AccountIndex":60113,"ApiKeyIndex":3,"MarketIndex":23,"ClientOrderIndex":1765705099315,"BaseAmount":8210,"Price":10276,"IsAsk":0,"Type":1,"TimeInForce":0,"ReduceOnly":1,"TriggerPrice":0,"OrderExpiry":0,"ExpiredAt":1765705690132,"Nonce":7718,"Sig":"dAXUEtAyGzOrttWljgJGnMLyBhrnac2geL5TUeX5WR7au7WKxbO4JeRZ0NZ8xstQe7E5EOfN1wj+XJPxP4xCt8lrETiU7QY9znNi1j9Kdy4="}
10:38:11 [DEBUG] Create Order Send Tx Response: code=200 message='{"ratelimit": "didn\'t use volume quota"}' tx_hash='f272aea2441cce2a14e318f85e10ba7c9a7bd0502ac9f2256b51a081737ddeea75aebccc6a17adf0' predicted_execution_time_ms=1765705076428 additional_properties={}
10:38:11 [INFO] âœ… Lighter Order Sent: f272aea2441cce2a14e318f85e10ba7c9a7bd0502ac9f2256b51a081737ddeea75aebccc6a17adf0
10:38:11 [DEBUG] ğŸ“ Tracked order f272aea2441cce2a14e3... (client_oid=1765705099315)
10:38:11 [INFO] âœ… Lighter close POPCAT-USD: Erfolgreich ($79.92)
10:38:11 [DEBUG] [LIGHTER] Removed POPCAT-USD from _positions_cache after successful close
10:38:11 [INFO] âœ… Lighter POPCAT-USD closed and tracked
10:38:11 [DEBUG] âœ… [ORDER_TYPE] CRV-USD: Market Order placed (TimeInForce=IOC, post_only=False, reduce_only=True)
10:38:11 [INFO]  X10 Order: 2000138175015739392
10:38:11 [DEBUG] [X10] Marked close order for CRV-USD: order_id=2000138175015739392
10:38:11 [DEBUG] [LIGHTER] Generated auth token for accountInactiveOrders
10:38:11 [DEBUG] âœ… [ORDER_TYPE] POPCAT-USD: Market Order placed (TimeInForce=IOC, post_only=False, reduce_only=True)
10:38:11 [INFO]  X10 Order: 2000138175079104512
10:38:11 [DEBUG] [X10] Marked close order for POPCAT-USD: order_id=2000138175079104512
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: ORDER - {'type': 'ORDER', 'data': {'isSnapshot': False, 'orders': [{'id': 2000138175015739392, 'accountId': 127074, 'externalId': '1052229458401642992291124083535498457760978432435668697976308849507052568635'
10:38:11 [INFO] âœ… [x10_account] ORDER UPDATE: CRV-USD SELL FILLED qty=45 filled=45 @ $0.38826 (id=2000138175015739392)
10:38:11 [DEBUG] X10 Adapter: Order update processed - CRV-USD #2000138175015739392 FILLED
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: TRADE - {'type': 'TRADE', 'data': {'isSnapshot': False, 'trades': [{'id': 2000138175854415872, 'accountId': 127074, 'market': 'CRV-USD', 'orderId': 2000138175015739392, 'externalOrderId': '1052229458401642992
10:38:11 [INFO] ğŸ’°ğŸ’°ğŸ’° [x10_account] FILL/TRADE: CRV-USD SELL 45.0 @ $0.3903 (Trade: 2000138175854415872, Order: 2000138175015739392, Fee: $0.0040, Taker: True)
10:38:11 [DEBUG] [X10] Saved 1 close fills for CRV-USD: qty=45.0000, fee=$0.0040, order_id=2000138175015739392
10:38:11 [DEBUG] X10 Adapter: Fill update processed - CRV-USD order=2000138175015739392
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': False, 'balance': {'collateralName': 'USD', 'balance': '204.582147', 'status': 'ACTIVE', 'equity': '204.640567', 'availableForTrade': '196.638801', 'availabl
10:38:11 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.640567, available=$196.638801, uPnL=$0.058420
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: POSITION - {
  "type": "POSITION",
  "data": {
    "isSnapshot": false,
    "positions": [
      {
        "id": 2000138086817726464,
        "accountId": 127074,
        "market": "CRV-USD",
        "status": "CLOSED",
        "side": "LONG",
        "leverage": "10",
        "size": "45",
        "value": "17.574960",
        "openPrice": "0.39060",
        "markPrice": "0.39055467",
        "liquidationPrice": "0",
        "margin": "0",
        "unrealisedPnl": "0",
        "midPriceUnrealisedPnl": "-0.008100",
        "realisedPnl": "-0.021405",
        "createdAt": 1765705055325,
        "updatedAt": 1765705076558
      }
    ]
  },
  "ts": 1765705076558,
  "seq": 17
}
10:38:11 [DEBUG] ğŸ“Š [x10_account] POSITION FIELDS: {
  "id": 2000138086817726464,
  "accountId": 127074,
  "market": "CRV-USD",
  "status": "CLOSED",
  "side": "LONG",
  "leverage": "10",
  "size": "45",
  "value": "17.574960",
  "openPrice": "0.39060",
  "markPrice": "0.39055467",
  "liquidationPrice": "0",
  "margin": "0",
  "unrealisedPnl": "0",
  "midPriceUnrealisedPnl": "-0.008100",
  "realisedPnl": "-0.021405",
  "createdAt": 1765705055325,
  "updatedAt": 1765705076558
}
10:38:11 [DEBUG] [X10] Removed CRV-USD from _positions_cache (status=CLOSED, size=45.0)
10:38:11 [DEBUG] X10 Adapter: Position update processed - CRV-USD
10:38:11 [INFO] ğŸ“ˆ [x10_account] POSITION UPDATE: CRV-USD LONG size=45 entry=$0.39060 mark=$0.39055467 uPnL=$0
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': False, 'balance': {'collateralName': 'USD', 'balance': '204.564696', 'status': 'ACTIVE', 'equity': '204.625156', 'availableForTrade': '196.623390', 'availabl
10:38:11 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.625156, available=$196.623390, uPnL=$0.060460
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: ORDER - {'type': 'ORDER', 'data': {'isSnapshot': False, 'orders': [{'id': 2000138175079104512, 'accountId': 127074, 'externalId': '607590140551568730799872020240480496474279639984065458976169296198983559204',
10:38:11 [INFO] âœ… [x10_account] ORDER UPDATE: POPCAT-USD SELL FILLED qty=821 filled=821 @ $0.09681 (id=2000138175079104512)
10:38:11 [DEBUG] X10 Adapter: Order update processed - POPCAT-USD #2000138175079104512 FILLED
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: TRADE - {'type': 'TRADE', 'data': {'isSnapshot': False, 'trades': [{'id': 2000138175921524736, 'accountId': 127074, 'market': 'POPCAT-USD', 'orderId': 2000138175079104512, 'externalOrderId': '6075901405515687
10:38:11 [INFO] ğŸ’°ğŸ’°ğŸ’° [x10_account] FILL/TRADE: POPCAT-USD SELL 821.0 @ $0.0974 (Trade: 2000138175921524736, Order: 2000138175079104512, Fee: $0.0180, Taker: True)
10:38:11 [DEBUG] [X10] Saved 1 close fills for POPCAT-USD: qty=821.0000, fee=$0.0180, order_id=2000138175079104512
10:38:11 [DEBUG] X10 Adapter: Fill update processed - POPCAT-USD order=2000138175079104512
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': False, 'balance': {'collateralName': 'USD', 'balance': '204.564696', 'status': 'ACTIVE', 'equity': '204.625156', 'availableForTrade': '204.625156', 'availabl
10:38:11 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.625156, available=$204.625156, uPnL=$0.060460
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: POSITION - {
  "type": "POSITION",
  "data": {
    "isSnapshot": false,
    "positions": [
      {
        "id": 2000138011160870912,
        "accountId": 127074,
        "market": "POPCAT-USD",
        "status": "CLOSED",
        "side": "LONG",
        "leverage": "10",
        "size": "821",
        "value": "80.017650",
        "openPrice": "0.09739",
        "markPrice": "0.097463643",
        "liquidationPrice": "0",
        "margin": "0",
        "unrealisedPnl": "0",
        "midPriceUnrealisedPnl": "0.004105",
        "realisedPnl": "-0.044188",
        "createdAt": 1765705037286,
        "updatedAt": 1765705076571
      }
    ]
  },
  "ts": 1765705076571,
  "seq": 22
}
10:38:11 [DEBUG] ğŸ“Š [x10_account] POSITION FIELDS: {
  "id": 2000138011160870912,
  "accountId": 127074,
  "market": "POPCAT-USD",
  "status": "CLOSED",
  "side": "LONG",
  "leverage": "10",
  "size": "821",
  "value": "80.017650",
  "openPrice": "0.09739",
  "markPrice": "0.097463643",
  "liquidationPrice": "0",
  "margin": "0",
  "unrealisedPnl": "0",
  "midPriceUnrealisedPnl": "0.004105",
  "realisedPnl": "-0.044188",
  "createdAt": 1765705037286,
  "updatedAt": 1765705076571
}
10:38:11 [DEBUG] [X10] Removed POPCAT-USD from _positions_cache (status=CLOSED, size=821.0)
10:38:11 [DEBUG] X10 Adapter: Position update processed - POPCAT-USD
10:38:11 [INFO] ğŸ“ˆ [x10_account] POSITION UPDATE: POPCAT-USD LONG size=821 entry=$0.09739 mark=$0.097463643 uPnL=$0
10:38:11 [DEBUG] ğŸ“¨ [x10_account] RAW: BALANCE - {'type': 'BALANCE', 'data': {'isSnapshot': False, 'balance': {'collateralName': 'USD', 'balance': '204.538498', 'status': 'ACTIVE', 'equity': '204.538498', 'availableForTrade': '204.538498', 'availabl
10:38:11 [DEBUG] ğŸ’° [x10_account] BALANCE: equity=$204.538498, available=$204.538498, uPnL=$0.000000
10:38:11 [DEBUG] [LIGHTER] Generated auth token for accountInactiveOrders
10:38:12 [DEBUG] Lighter fetch_my_trades(CRV-USD): Found 20 filled orders
10:38:12 [INFO] âœ… CRV-USD Using Lighter accountTrades close price: $0.390830
10:38:12 [INFO] ğŸ’° CRV-USD Lighter Closed PnL: $-0.0086 (entry=$0.390640, close=$0.390830, size=45.4000, source=lighter_accountTrades)
10:38:12 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:12 [DEBUG] âœ… TIA-USD: X10=$223,830, Lighter=$2,052,101, Total=$2,275,930
10:38:13 [DEBUG] Lighter fetch_my_trades(POPCAT-USD): Found 44 filled orders
10:38:13 [INFO] âœ… POPCAT-USD Using Lighter accountTrades close price: $0.097430
10:38:13 [INFO] ğŸ’° POPCAT-USD Lighter Closed PnL: $-0.0575 (entry=$0.097360, close=$0.097430, size=821.0000, source=lighter_accountTrades)
10:38:13 [INFO] âœ… X10 POPCAT-USD closed and tracked
10:38:13 [INFO] âœ… X10 CRV-USD closed and tracked
10:38:13 [DEBUG] ğŸ’“ [x10_account] Alive (uptime=55s, last_msg=2s, last_pong=55s, pings=1, pongs=0)
10:38:13 [DEBUG] ğŸ’“ [lighter] Alive (uptime=55s, last_msg=0s, last_server_ping=55s, server_pings_answered=0)
10:38:13 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:13 [DEBUG] ğŸ’“ [x10_funding] Alive (uptime=55s, last_msg=6s, last_pong=55s, pings=0, pongs=0)
10:38:13 [DEBUG] ğŸ’“ [x10_orderbooks] Alive (uptime=55s, last_msg=0s, last_pong=55s, pings=0, pongs=0)
10:38:13 [DEBUG] ğŸ’“ [x10_trades] Alive (uptime=55s, last_msg=1s, last_pong=55s, pings=0, pongs=0)
10:38:14 [DEBUG] âœ… JUP-USD: X10=$90,138, Lighter=$4,966,410, Total=$5,056,548
10:38:14 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:14 [INFO] âœ… No open positions remaining
10:38:14 [INFO] ğŸ” Final position sweep...
10:38:14 [INFO] âš¡ [FINAL] Executing FINAL ImmediateCancelAll before sweep...
10:38:14 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:14 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:14 [INFO] âš¡ Executing ImmediateCancelAll (nonce=7719)...
10:38:14 [DEBUG] Cancel All Orders Tx Info: {"AccountIndex":60113,"ApiKeyIndex":3,"TimeInForce":0,"Time":0,"ExpiredAt":1765705693881,"Nonce":7719,"Sig":"Z8pOtcaKHgdusMRxbsBnNQujIz+rzmQudrkyLunsN2A1VUrzWX63PZAaNNBeoePlhRZwCSOF17pOYXBzkqtG2bZHku2xEM4bMdE1As+TyAo="}
10:38:15 [DEBUG] Cancel All Orders Send Tx Response: code=200 message='{"ratelimit": "didn\'t use volume quota"}' tx_hash='2fbda06d3348fda98a74c8675b10678c0959e1f553416a7e3f709334aa95e5b73f885d22d6e9f8d4' predicted_execution_time_ms=1765705079966 additional_properties={}
10:38:15 [INFO] âœ… Lighter: ImmediateCancelAll executed (tx={"AccountIndex":60113,"ApiKeyIndex":3,"TimeInForce":0,"Time":0,"ExpiredAt":1765705693881,"Nonce":7719,"Sig":"Z8pOtcaKHgdusMRxbsBnNQujIz+rzmQudrkyLunsN2A1VUrzWX63PZAaNNBeoePlhRZwCSOF17pOYXBzkqtG2bZHku2xEM4bMdE1As+TyAo="})
10:38:15 [DEBUG] ğŸ”„ Nonce cache invalidated
10:38:15 [INFO] âœ… [FINAL] ImmediateCancelAll executed
10:38:15 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:15 [INFO] âœ… Final sweep: No positions found
10:38:15 [DEBUG] âœ“ CRV-USD entry prices: x10=$0.390600, lighter=$0.390640, source=trade_obj
10:38:15 [DEBUG] [PNL] CRV-USD Hedge: lighter_pnl=$-0.008626 (SHORT), x10_pnl=$-0.013500 (LONG), fees=$0.007906, funding=$-0.000000, total=$-0.030032
10:38:15 [INFO] ğŸ’° Shutdown PnL for CRV-USD: PnL=$-0.0300, Funding=$-0.0000 (lighter_pnl=$-0.0086, x10_pnl=$-0.0135, fees=$0.0079)
10:38:15 [INFO] ğŸ“ StateManager.close_trade(CRV-USD): PnL=$-0.0300, Funding=$-0.0000
10:38:15 [DEBUG] ğŸ“ StateManager.close_trade(CRV-USD): update_trade returned True
10:38:15 [DEBUG] ğŸ§¹ Removed closed trade CRV-USD from memory
10:38:15 [INFO] ğŸ“ Shutdown: Marked CRV-USD as closed in DB (PnL=$-0.0300, Funding=$-0.0000)
10:38:15 [DEBUG] âœ“ POPCAT-USD entry prices: x10=$0.097390, lighter=$0.097360, source=trade_obj
10:38:15 [DEBUG] [PNL] POPCAT-USD Hedge: lighter_pnl=$-0.057470 (SHORT), x10_pnl=$-0.008210 (LONG), fees=$0.035978, funding=$-0.000000, total=$-0.101658
10:38:15 [INFO] ğŸ’° Shutdown PnL for POPCAT-USD: PnL=$-0.1017, Funding=$-0.0000 (lighter_pnl=$-0.0575, x10_pnl=$-0.0082, fees=$0.0360)
10:38:15 [INFO] ğŸ“ StateManager.close_trade(POPCAT-USD): PnL=$-0.1017, Funding=$-0.0000
10:38:15 [DEBUG] ğŸ“ StateManager.close_trade(POPCAT-USD): update_trade returned True
10:38:15 [DEBUG] ğŸ§¹ Removed closed trade POPCAT-USD from memory
10:38:15 [INFO] ğŸ“ Shutdown: Marked POPCAT-USD as closed in DB (PnL=$-0.1017, Funding=$-0.0000)
10:38:15 [INFO] ğŸ“ Shutdown: Marked 2 trades as closed in DB | Session Total: PnL=$-0.0661, Funding=$0.0000
10:38:15 [INFO] ğŸ›‘ Stopping InMemoryStateManager...
10:38:15 [INFO] ğŸ“ DB close_trade(CRV-USD): PnL=$-0.0300, Funding=$-0.0000
10:38:15 [DEBUG] ğŸ“ DB close_trade(CRV-USD): Execute returned 603
10:38:15 [DEBUG] ğŸ“ Flushed 1 writes
10:38:15 [INFO] ğŸ“ State writer loop stopped
10:38:15 [DEBUG] ğŸ“ Flushed 1 writes in 16.0ms
10:38:15 [INFO] ğŸ“ DB close_trade(POPCAT-USD): PnL=$-0.1017, Funding=$-0.0000
10:38:15 [DEBUG] [LIGHTER] Rate limiter acquire() skipped - shutdown active
10:38:15 [DEBUG] âœ… HYPE-USD: X10=$5,678,418, Lighter=$1,654,416, Total=$7,332,834
10:38:16 [DEBUG] ğŸ“ DB close_trade(POPCAT-USD): Execute returned 603
10:38:16 [DEBUG] ğŸ“ Flushed 1 writes
10:38:16 [INFO] âœ… InMemoryStateManager stopped
10:38:16 [DEBUG] ğŸ“ Flushed 1 writes in 0.0ms
10:38:16 [INFO] ğŸ›‘ FeeManager stopped
10:38:16 [INFO] ğŸ”’ Closing database...
10:38:16 [INFO] ğŸ–Šï¸ Database write loop stopped
10:38:16 [INFO] âœ… Database closed
10:38:16 [INFO] ğŸ’¾ Persist phase complete
10:38:16 [INFO] ğŸ›‘ Stopping OI Tracker...
10:38:16 [INFO] ğŸ›‘ Stopping OpenInterestTracker...
10:38:16 [INFO] âœ… OpenInterestTracker stopped
10:38:16 [DEBUG] ğŸ’“ [x10_account] Keepalive loop cancelled
10:38:16 [INFO] ğŸ’“ [x10_account] Keepalive loop stopped
10:38:17 [DEBUG] [lighter] WebSocket closed (server slow to respond)
10:38:17 [INFO] ğŸ”Œ [lighter] WebSocket stopped
10:38:17 [DEBUG] [x10_account] WebSocket closed (server slow to respond)
10:38:17 [INFO] ğŸ”Œ [x10_account] WebSocket stopped
10:38:17 [DEBUG] [x10_trades] WebSocket closed (server slow to respond)
10:38:17 [INFO] ğŸ”Œ [x10_trades] WebSocket stopped
10:38:17 [DEBUG] [x10_funding] WebSocket closed (server slow to respond)
10:38:17 [INFO] ğŸ”Œ [x10_funding] WebSocket stopped
10:38:17 [DEBUG] [x10_orderbooks] WebSocket closed (server slow to respond)
10:38:17 [INFO] ğŸ”Œ [x10_orderbooks] WebSocket stopped
10:38:17 [INFO] âœ… WebSocketManager stopped
10:38:17 [INFO] âœ… Lighter Adapter closed
10:38:17 [INFO] âœ… X10 Adapter geschlossen.
10:38:17 [INFO] âœ… Teardown complete
10:38:17 [DEBUG] [LIGHTER] Shutdown active - returning cached positions
10:38:17 [INFO] âœ… All positions closed. Bye! (elapsed=8.41s)
10:38:17 [INFO] âœ… Shutdown complete
10:38:17 [INFO] ğŸ›‘ Shutting down...
10:38:17 [INFO] ğŸ›‘ Shutdown requested...
10:38:17 [INFO] ğŸ›‘ Stopping Dashboard API...
10:38:17 [INFO] âœ… ParallelExecutionManager: Already stopping
10:38:17 [INFO] ğŸ›‘ Stopping OpenInterestTracker...
10:38:17 [INFO] âœ… OpenInterestTracker stopped
10:38:17 [INFO] ğŸ›‘ Funding tracker: Cancelled
10:38:17 [INFO] âœ… Funding Tracker stopped
10:38:17 [INFO] ğŸ”Œ Closing adapters...
10:38:17 [INFO] âœ… Bot V5 shutdown complete
10:38:17 [INFO] ğŸ›‘ STOPPING BOT: Initiating Graceful Shutdown...
10:38:17 [INFO] ğŸ›‘ GRACEFUL SHUTDOWN: Closing all positions...
10:38:17 [INFO] âœ… Shutdown already completed (reason=funding_bot), returning cached result
10:38:17 [INFO] âœ… All positions closed. Bye!
10:38:17 [INFO] ğŸ›‘ Stopping Infrastructure...
