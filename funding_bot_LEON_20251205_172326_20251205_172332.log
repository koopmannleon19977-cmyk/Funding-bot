17:23:32 [INFO]  CONFIG VALIDIERUNG abgeschlossen.
17:23:32 [INFO] ğŸ”¥ BOT V5 (Architected) STARTING...
17:23:32 [INFO] ğŸš€ Starting InMemoryStateManager...
17:23:32 [INFO] ğŸ“‚ Initializing database: data/trades.db
17:23:32 [INFO] âœ… Read pool created: 5 connections
17:23:32 [INFO] âœ… WAL mode enabled
17:23:32 [INFO] ğŸ”„ Running database migrations...
17:23:32 [INFO] âœ… Migrations complete (15 statements)
17:23:32 [INFO] âœ… Database initialized
17:23:32 [INFO] ğŸ–Šï¸ Database write loop started
17:23:32 [INFO] ğŸ“‚ Loaded 4 trades from database
17:23:32 [INFO] âœ… InMemoryStateManager started (loaded 4 trades)
17:23:32 [INFO] âœ… State Manager started
17:23:32 [INFO]  Telegram Bot disabled (Token/ChatID missing).
17:23:32 [INFO] âœ… Async database initialized
17:23:32 [INFO] ğŸ“ State writer loop started
17:23:32 [INFO] Initialisiere X10 Adapter...
17:23:32 [INFO]  X10 Account initialisiert.
17:23:32 [INFO] Initialisiere Lighter Adapter...
17:23:32 [INFO] ğŸ’° FeeManager initialized (Dynamic Fees: ENABLED)
17:23:32 [INFO] âœ… Lighter Fees updated: Maker=0.000000, Taker=0.000000 (source=config)
17:23:33 [INFO] âœ… X10 Fee Schedule from API: Maker=0.000000, Taker=0.000225
17:23:33 [INFO] âœ… X10 Fees updated: Maker=0.000000, Taker=0.000225 (source=api)
17:23:33 [INFO] âœ… FeeManager started with periodic refresh
17:23:33 [INFO] âœ… FeeManager started
17:23:33 [INFO] ğŸ“Š Loading Market Data via REST...
17:23:34 [INFO] âœ… Lighter: Loaded 116 markets (base data)
17:23:36 [INFO]  X10: 91 MÃ¤rkte geladen, 91 Funding Rates, 78 Preise
17:23:37 [INFO] âœ… Lighter: Updated 116 markets with size_decimals from API
17:23:37 [INFO] ğŸ“Š MARKET ADA-USD: size_decimals=1, price_decimals=5, min_base_amount=10.0
17:23:37 [INFO] ğŸ“Š MARKET SEI-USD: size_decimals=1, price_decimals=5, min_base_amount=50.0
17:23:37 [INFO] ğŸ“Š MARKET RESOLV-USD: size_decimals=0, price_decimals=6, min_base_amount=40.0
17:23:37 [INFO] ğŸ“Š MARKET TIA-USD: size_decimals=1, price_decimals=5, min_base_amount=3.0
17:23:37 [INFO] âœ… Markets loaded: X10=91, Lighter=116
17:23:37 [INFO] ğŸ“ˆ Pre-loading Lighter prices...
17:23:38 [INFO] âœ… Lighter prices loaded: 115 symbols
17:23:38 [INFO] ğŸ”¥ Warming up execution clients (Network Handshake)...
17:23:41 [INFO] âœ… Execution clients warmed up & NETWORK READY
17:23:41 [INFO] FundingPredictorV2 initialized with BTC Correlation
17:23:41 [INFO] ğŸ“‚ Loaded prediction history: 68 symbols
17:23:41 [INFO] âœ… FundingPredictorV2 started with persistence
17:23:41 [INFO] å¯åŠ¨ OI Tracker fÃ¼r 68 Symbole...
17:23:41 [INFO] âœ… OpenInterestTracker started (interval=15.0s)
17:23:41 [INFO] ğŸŒ Starting WebSocket Manager...
17:23:41 [INFO] ğŸ“Š OI Tracker: Starting cycle 1 (68 symbols)
17:23:41 [INFO] ğŸ”Œ [lighter] WebSocket manager started
17:23:41 [INFO] ğŸ”Œ [x10_account] WebSocket manager started
17:23:41 [INFO] ğŸ”Œ [x10_trades] WebSocket manager started
17:23:41 [INFO] ğŸ”Œ [x10_funding] WebSocket manager started
17:23:41 [INFO] ğŸ”Œ [lighter] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': 20.0, 'ping_timeout': 10.0}
17:23:41 [INFO] ğŸ”Œ [x10_account] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': 15.0, 'additional_headers': {'X-Api-Key': 'a1c9207f79f0e57ddc454bf1e16dbe49', 'User-Agent': 'X10PythonTradingClient/0.4.5'}}
17:23:41 [INFO] ğŸ”Œ [x10_trades] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': 15.0, 'additional_headers': {'X-Api-Key': 'a1c9207f79f0e57ddc454bf1e16dbe49', 'User-Agent': 'X10PythonTradingClient/0.4.5'}}
17:23:41 [INFO] ğŸ”Œ [x10_funding] Connecting with kwargs: {'close_timeout': 5.0, 'max_size': 4194304, 'ping_interval': 15.0, 'additional_headers': {'X-Api-Key': 'a1c9207f79f0e57ddc454bf1e16dbe49', 'User-Agent': 'X10PythonTradingClient/0.4.5'}}
17:23:41 [INFO] âœ… WebSocketManager started (Lighter + X10 Account/Trades/Funding)
17:23:42 [INFO] âœ… [lighter] Connected to wss://mainnet.zklighter.elliot.ai/stream
17:23:42 [INFO] âœ… [lighter] Keepalive enabled: ping_interval=20.0s, ping_timeout=10.0s
17:23:42 [INFO] [lighter] Resubscribing to 71 channels (paced)...
17:23:42 [INFO] [lighter] Receive loop started (async iterator)
17:23:42 [INFO] âœ… [x10_funding] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/funding
17:23:42 [INFO] âœ… [x10_funding] Keepalive enabled: ping_interval=15.0s, ping_timeout=None (auto-pong)
17:23:42 [INFO] [x10_funding] Receive loop started (async iterator)
17:23:42 [INFO] âœ… [x10_account] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/account
17:23:42 [INFO] âœ… [x10_account] Keepalive enabled: ping_interval=15.0s, ping_timeout=None (auto-pong)
17:23:42 [INFO] [x10_account] Receive loop started (async iterator)
17:23:42 [INFO] âœ… [x10_trades] Connected to wss://api.starknet.extended.exchange/stream.extended.exchange/v1/publicTrades
17:23:42 [INFO] âœ… [x10_trades] Keepalive enabled: ping_interval=15.0s, ping_timeout=None (auto-pong)
17:23:42 [INFO] [x10_trades] Receive loop started (async iterator)
17:23:42 [INFO] [lighter] Resubscribed to 71 channels
17:23:43 [INFO] [x10] Connected to Firehose streams (Trades & Funding) for all markets.
17:23:43 [INFO] ğŸ”— Components Wired: WS -> OI Tracker -> Prediction
17:23:43 [INFO] ğŸ§Ÿ Starte Zombie-Check: Vergleiche DB mit echten Positionen...
17:23:43 [INFO] ğŸ” DB meldet 4 offene Trades. PrÃ¼fe Exchange...
17:23:43 [INFO] ğŸ“Š [OB] Lighter ZRO-USD: Imbalance=+0.24
17:23:43 [INFO] ğŸ“Š [OB] Lighter KAITO-USD: Imbalance=-0.69
17:23:43 [INFO] ğŸ“Š [OB] Lighter WLFI-USD: Imbalance=+0.48
17:23:43 [INFO] ğŸ“Š [OB] Lighter SPX-USD: Imbalance=+1.00
17:23:43 [INFO] ğŸ“Š [OB] Lighter OP-USD: Imbalance=-0.56
17:23:43 [INFO] ğŸ“Š [OB] Lighter CRV-USD: Imbalance=-0.35
17:23:43 [INFO] ğŸ“Š [OB] Lighter ENA-USD: Imbalance=+0.25
17:23:43 [INFO] ğŸ“Š [OB] Lighter JUP-USD: Imbalance=-0.80
17:23:43 [INFO] ğŸ“Š [OB] Lighter PENGU-USD: Imbalance=-0.14
17:23:43 [INFO] ğŸ“Š [OB] Lighter TON-USD: Imbalance=-0.21
17:23:43 [INFO] ğŸ“Š [OB] Lighter EDEN-USD: Imbalance=+0.24
17:23:43 [INFO] ğŸ“Š [OB] Lighter ONDO-USD: Imbalance=+1.00
17:23:43 [INFO] ğŸ“Š [OB] Lighter AVNT-USD: Imbalance=+0.54
17:23:43 [INFO] ğŸ“Š [OB] Lighter ARB-USD: Imbalance=+0.16
17:23:43 [INFO] ğŸ“Š [OB] Lighter 1000SHIB-USD: Imbalance=+0.26
17:23:43 [INFO] ğŸ“Š [OB] Lighter APT-USD: Imbalance=+0.14
17:23:43 [INFO] ğŸ“Š [OB] Lighter XRP-USD: Imbalance=+0.18
17:23:43 [INFO] ğŸ“Š [OB] Lighter AAVE-USD: Imbalance=-0.37
17:23:43 [INFO] ğŸ“Š [OB] Lighter XPL-USD: Imbalance=-0.15
17:23:44 [INFO] ğŸ“Š [OB] Lighter 1000PEPE-USD: Imbalance=-0.20
17:23:44 [INFO] ğŸ“Š [OB] Lighter PENDLE-USD: Imbalance=+0.42
17:23:44 [INFO] ğŸ“Š [OB] Lighter FARTCOIN-USD: Imbalance=-1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter ZEC-USD: Imbalance=-1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter BNB-USD: Imbalance=+0.56
17:23:44 [INFO] ğŸ“Š [OB] Lighter LDO-USD: Imbalance=-0.12
17:23:44 [INFO] ğŸ“Š [OB] Lighter USDJPY-USD: Imbalance=+0.12
17:23:44 [INFO] ğŸ“Š [OB] Lighter XAG-USD: Imbalance=-0.24
17:23:44 [INFO] ğŸ“Š [OB] Lighter TRUMP-USD: Imbalance=+0.31
17:23:44 [INFO] ğŸ“Š [OB] Lighter DOGE-USD: Imbalance=-0.79
17:23:44 [INFO] ğŸ“Š [OB] Lighter HYPE-USD: Imbalance=+0.98
17:23:44 [INFO] ğŸ“Š [OB] Lighter SOL-USD: Imbalance=-0.20
17:23:44 [INFO] ğŸ“Š [OB] Lighter DOT-USD: Imbalance=-0.41
17:23:44 [INFO] ğŸ“Š [OB] Lighter GRASS-USD: Imbalance=-0.28
17:23:44 [INFO] ğŸ“Š [OB] Lighter LINEA-USD: Imbalance=-0.11
17:23:44 [INFO] ğŸ“Š [OB] Lighter NEAR-USD: Imbalance=-0.56
17:23:44 [INFO] ğŸ“Š [OB] Lighter TIA-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter UNI-USD: Imbalance=-0.68
17:23:44 [INFO] ğŸ“Š [OB] Lighter STRK-USD: Imbalance=-0.39
17:23:44 [INFO] ğŸ“Š [OB] Lighter AVAX-USD: Imbalance=-0.18
17:23:44 [INFO] ğŸ“Š [OB] Lighter TRX-USD: Imbalance=+0.21
17:23:44 [INFO] ğŸ“Š [OB] Lighter WLD-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter 1000BONK-USD: Imbalance=+0.22
17:23:44 [INFO] ğŸ“Š [OB] Lighter MON-USD: Imbalance=+0.48
17:23:44 [INFO] ğŸ“Š [OB] Lighter VIRTUAL-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter ZORA-USD: Imbalance=-0.16
17:23:44 [INFO] Lighter: Found 5 open positions
17:23:44 [INFO] ğŸŒ Echte Positionen auf Exchanges: ['KAITO-USD', 'APT-USD', 'AVAX-USD', 'BERA-USD', 'AVAX-USD', 'BERA-USD', 'APT-USD', 'KAITO-USD', 'LINEA-USD']
17:23:44 [INFO] ğŸ§Ÿ Reverse Ghost Check: Suche Positionen auf Exchange ohne DB Entry...
17:23:44 [INFO] ğŸ“Š [OB] Lighter BTC-USD: Imbalance=+0.70
17:23:44 [INFO] ğŸ“Š [OB] Lighter SUI-USD: Imbalance=-0.11
17:23:44 [INFO] ğŸ“Š [OB] Lighter ASTER-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter RESOLV-USD: Imbalance=-1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter WIF-USD: Imbalance=+0.66
17:23:44 [INFO] ğŸ“Š [OB] Lighter FIL-USD: Imbalance=-0.31
17:23:44 [INFO] ğŸ“Š [OB] Lighter LINK-USD: Imbalance=+0.18
17:23:44 [INFO] ğŸ“Š [OB] Lighter BERA-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter PUMP-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter IP-USD: Imbalance=-0.17
17:23:44 [INFO] ğŸ“Š [OB] Lighter TAO-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter POPCAT-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter BCH-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter LTC-USD: Imbalance=-0.43
17:23:44 [INFO] ğŸ“Š [OB] Lighter XAU-USD: Imbalance=+0.47
17:23:44 [INFO] ğŸ“Š [OB] Lighter ADA-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter SEI-USD: Imbalance=-0.33
17:23:44 [INFO] ğŸ“Š [OB] Lighter EIGEN-USD: Imbalance=+1.00
17:23:44 [INFO] ğŸ“Š [OB] Lighter S-USD: Imbalance=+1.00
17:23:45 [INFO] Lighter: Found 5 open positions
17:23:45 [WARNING] ğŸš¨ Found 1 ORPHANED positions: {'LINEA-USD'}
17:23:45 [WARNING] ğŸ§¹ Cleaning orphaned position: LINEA-USD
17:23:45 [INFO] Lighter LINEA-USD: size=-3500.0, closing as SELL, notional=$28.81
17:23:45 [INFO] ğŸ” DEBUG close_live_position ENTRY: symbol=LINEA-USD (type=<class 'str'>)
17:23:45 [INFO] ğŸ” DEBUG: original_side=SELL (type=<class 'str'>)
17:23:45 [INFO] ğŸ” DEBUG: notional_usd=28.811999999999998 (type=<class 'float'>)
17:23:45 [INFO] Lighter: Found 5 open positions
17:23:45 [INFO] ğŸ”» LIGHTER CLOSE LINEA-USD: size=-3500.000000 coins, side=BUY, price=$0.0082, notional=$28.81
17:23:45 [INFO] ğŸ”» IOC CLOSE ORDER: LINEA-USD BUY base=3500 price=8479
17:23:45 [INFO] âœ… Lighter IOC Close Order executed: 2cf6f39aafd17ac372c4d34ab887c8b301c1a6e16edd670ee884de8b69b1a529673f8fc2133bdba4
17:23:45 [INFO] âœ… Lighter close LINEA-USD: Erfolgreich ($28.81) - Cache invalidated
17:23:46 [INFO] ğŸ“Š [OB] Lighter APEX-USD: Imbalance=-0.37
17:23:47 [INFO] ğŸ“Š [OB] Lighter MNT-USD: Imbalance=-0.31
17:23:47 [INFO] Lighter: Found 5 open positions
17:23:47 [ERROR] âŒ LINEA-USD still open after IOC close! Retrying with more aggression...
17:23:47 [INFO] ğŸ”» IOC CLOSE ORDER: LINEA-USD BUY base=3500 price=8644
17:23:47 [INFO] âœ… Lighter IOC Close Order executed: 7fe6f0741e9ac47b08fcd7c726746c4e4867a29afe712165ca2f19d6cbf8bd1880818224dbd3c585
17:23:47 [INFO] âœ… Closed orphaned LINEA-USD
17:23:47 [INFO] âœ… ParallelExecutionManager: Rollback processor started
17:23:47 [INFO] âœ… ParallelExecutionManager: Cleanup task started
17:23:47 [INFO] âœ… ParallelExecutionManager started
17:23:47 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
17:23:47 [INFO]    BOT V5 RUNNING 24/7 - SUPERVISED | Ctrl+C = Stop   
17:23:47 [INFO] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
17:23:47 [INFO] ğŸš€ BotEventLoop starting...
17:23:47 [INFO] â–¶ï¸ Started task: connection_watchdog
17:23:47 [INFO] â–¶ï¸ Started task: logic_loop
17:23:47 [INFO] â–¶ï¸ Started task: trade_management_loop
17:23:47 [INFO] â–¶ï¸ Started task: farm_loop
17:23:47 [INFO] â–¶ï¸ Started task: maintenance_loop
17:23:47 [INFO] â–¶ï¸ Started task: cleanup_finished_tasks
17:23:47 [INFO] â–¶ï¸ Started task: health_reporter
17:23:47 [INFO] âœ… Started 7 tasks
17:23:47 [INFO] ğŸ”„ Rollback processor running...
17:23:47 [INFO] ğŸ• Connection Watchdog gestartet (Timeout: 120s)
17:23:47 [INFO] Logic Loop gestartet â€“ REFRESH alle 3s
17:23:47 [INFO] ğŸ›¡ï¸ Trade Management Loop gestartet
17:23:47 [INFO] ğŸšœ Farm Mode ACTIVE
17:23:48 [INFO] Lighter: Found 5 open positions
17:23:48 [INFO] ğŸ“Š Positions: X10=4, Lighter=5
17:23:48 [INFO]  Volatility Monitor initialized: Low<3.0%, Normal<10.0%, High<20.0%, Hard Cap<50.0%
17:23:49 [INFO]  X10: 91 MÃ¤rkte geladen, 91 Funding Rates, 78 Preise
17:23:50 [INFO] ğŸ” Running periodic exchange sync check...
17:23:50 [INFO] ğŸ” Starting Exchange Sync Check...
17:23:51 [INFO] Lighter: Found 5 open positions
17:23:51 [ERROR] ğŸš¨ DESYNC DETECTED: Positions only on Lighter: ['LINEA-USD']
17:23:51 [ERROR] âš ï¸ These are UNHEDGED and create directional risk!
17:23:51 [WARNING] ğŸ”» Closing orphaned Lighter position: LINEA-USD
17:23:51 [INFO] ğŸ” DEBUG close_live_position ENTRY: symbol=LINEA-USD (type=<class 'str'>)
17:23:51 [INFO] ğŸ” DEBUG: original_side=SELL (type=<class 'str'>)
17:23:51 [INFO] ğŸ” DEBUG: notional_usd=28.979999999999997 (type=<class 'float'>)
17:23:51 [INFO] Lighter: Found 5 open positions
17:23:51 [INFO] ğŸ”» LIGHTER CLOSE LINEA-USD: size=-3500.000000 coins, side=BUY, price=$0.0083, notional=$28.98
17:23:51 [INFO] ğŸ”» IOC CLOSE ORDER: LINEA-USD BUY base=3500 price=8529
17:23:52 [INFO] âœ… Lighter IOC Close Order executed: 3720a8e48d810af0ac30e07b2d940d86426629b52446f73a3d696e1b2bc150c939932e903fcf7442
17:23:52 [INFO] âœ… Lighter close LINEA-USD: Erfolgreich ($28.98) - Cache invalidated
17:23:52 [INFO] ğŸšœ Farm Mode ACTIVE
17:23:53 [INFO] Lighter: Found 5 open positions
17:23:53 [ERROR] âŒ LINEA-USD still open after IOC close! Retrying with more aggression...
17:23:53 [INFO] ğŸ”» IOC CLOSE ORDER: LINEA-USD BUY base=3500 price=8694
17:23:53 [INFO] Lighter: Found 5 open positions
17:23:53 [INFO] ğŸ“Š Positions: X10=4, Lighter=5
17:23:53 [ERROR] âŒ Lighter IOC Close Error: HTTP response body: code=21733 message='order price flagged as an accidental price' additional_properties={}
17:23:53 [ERROR] âŒ Failed to close orphaned Lighter LINEA-USD - close returned False
17:23:57 [INFO] ğŸšœ Farm Mode ACTIVE
17:23:59 [INFO] Lighter: Found 5 open positions
17:23:59 [INFO] ğŸ“Š Positions: X10=4, Lighter=5
17:24:01 [INFO] ğŸ›‘ Initiating shutdown...
17:24:01 [INFO] Logic loop cancelled
17:24:01 [INFO] Connection watchdog cancelled
17:24:01 [INFO] ğŸ”Œ [x10_trades] WebSocket stopped
17:24:02 [INFO] ğŸ”Œ [x10_funding] WebSocket stopped
17:24:06 [WARNING] WebSocket stop timed out
17:24:06 [INFO] ğŸ›‘ Rollback processor: Shutdown signal received
17:24:06 [INFO] âœ… ParallelExecutionManager: Stopped
17:24:06 [INFO] ğŸ›‘ Stopping InMemoryStateManager...
17:24:06 [INFO] ğŸ“ State writer loop stopped
17:24:06 [INFO] âœ… InMemoryStateManager stopped
17:24:06 [INFO] âœ… Shutdown complete
17:24:06 [INFO] ğŸ›‘ Shutting down...
17:24:06 [INFO] ğŸ›‘ Shutdown requested...
17:24:06 [INFO] âœ… ParallelExecutionManager: Stopped
17:24:06 [INFO] ğŸ”Œ [lighter] WebSocket stopped
17:24:06 [INFO] ğŸ”Œ [x10_account] WebSocket stopped
17:24:06 [INFO] ğŸ”Œ [x10_trades] WebSocket stopped
17:24:06 [INFO] ğŸ”Œ [x10_funding] WebSocket stopped
17:24:06 [INFO] âœ… WebSocketManager stopped
17:24:06 [INFO] âœ… OpenInterestTracker stopped
17:24:06 [INFO] ğŸ›‘ Stopping InMemoryStateManager...
17:24:06 [INFO] âœ… InMemoryStateManager stopped
17:24:06 [INFO] ğŸ”’ Closing database...
17:24:06 [INFO] ğŸ–Šï¸ Database write loop stopped
17:24:06 [INFO] âœ… Database closed
17:24:06 [INFO] ğŸ›‘ FeeManager stopped
17:24:06 [INFO] âœ… X10 Adapter geschlossen.
17:24:06 [INFO] âœ… Lighter Adapter closed
17:24:06 [INFO] âœ… Bot V5 shutdown complete
